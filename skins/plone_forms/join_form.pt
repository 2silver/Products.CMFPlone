<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master">

<body>

<div metal:fill-slot="main"
     tal:define="errors python:request.get('errors', {})" > 
 
    <h1>Please register</h1>

    <p>
    By registering with us, you will have your own account with the
    possibility to have personalized content, and you will be able to add
    your own documents, images and files to the site.
    </p> 
<span tal:replace="errors" />
    <form class="group"
          action="register" 
          method="post"
          tal:define="allowEnterPassword here/portal_properties/validate_email|nothing;">

        <span class="legend">Personal Details</span>
	
        <input type="hidden" name="last_visit:date" value="ZopeTime"
               tal:attributes="value here/ZopeTime">
        <input type="hidden" name="prev_visit:date" value="ZopeTime"
               tal:attributes="value here/ZopeTime">

    	<div class="row"
             tal:define="error_fullname errors/fullname | nothing;
                         fullname request/fullname | nothing;" >
            <span class="label required">Full name</span>
            <span class="field" 
                  tal:attributes="class python:test(error_fullname, 'field error', 'field')" >

                <div tal:condition="error_fullname"
                      tal:replace="error_fullname" />

                <input type="text" name="field_fullname" size="25"
                       value="fullname"
                       tal:attributes="value fullname">
            </span>
            <span class="info">
            Enter your full name.
            </span>
        </div>
	
        <div class="row"
             tal:define="error_username errors/username| nothing;
                         username request/username | nothing;" >
            <span class="label required">User name</span>
            <span class="field"
                  tal:attributes="class python:test(error_username, 'field error', 'field')" >
                <div tal:condition="error_username"
                      tal:replace="structure string:$error_username<br />" />

                <input type="text" name="field_username" size="25"
                       value="username"
                       tal:attributes="value username">
            </span>
            <span class="info">
            Enter the user name you wish to have, usually something like
            "jsmith". No spaces or special characters. This is the name you use to sign in.
            </span>
        </div>

        <div class="row"
             tal:define="error_email errors/email | nothing;
                         email request/email | nothing;" >
            <span class="label required">Email</span>
            <span class="field"
                  tal:attributes="class python:test(error_email, 'field error', 'field')" >
                <div tal:condition="error_email "
                      tal:replace="error_email " />

                <input type="text" 
                       name="field_email" 
                       size="25"
                       tal:attributes="value email">
            </span>
            <span class="info">
            Enter your email address. This is necessary in case you lose your
            password. We respect your privacy, and will not give the address
            away to any third parties.
            </span>
        </div>


        <div class="row" 
             tal:condition="not: allowEnterPassword"
             tal:define="error_password errors/password | nothing;
                         password request/password | nothing;" >
            <span class="label required">Password</span>
            <span class="field"
                  tal:attributes="class python:test(error_password, 'field error', 'field')" >
               <div tal:condition="error_password "
                      tal:replace="error_password " />
                <input type="password" 
                       name="field_password" 
                       size="10"
                       value="" 
                       tal:attributes="value password" />
            </span>
            <span class="info">
            Enter the password you want. Minimum 5 characters.
            </span>
        </div>

        <div class="row" 
             tal:condition="not: allowEnterPassword"
             tal:define="error_confirm errors/confirm | nothing;
                         confirm request/confirm | nothing;" >
            <span class="label required">Confirm Password</span>
            <span class="field"
                 tal:attributes="class python:test(error_confirm, 'field error', 'field')" >
                <span tal:condition="error_confirm"
                      tal:replace="error_confirm" />
                <input type="password" 
                       name="field_confirm" 
                       size="10" 
                       value="" 
                       tal:attributes="value confirm" />
            </span>
            <span class="info">
            Re-enter the password. Make sure the passwords are identical.
            </span>
        </div>

        <div class="row" tal:condition="not: allowEnterPassword">
            <span class="label">Mail Password?</span>
            <span class="field">
                <input type="checkbox" class="noborder" name="field_mail_me" size="30" id="cb_mailme" checked />
                <label for="cb_mailme">Yes, mail me my password</label>
            </span>
            <span class="info">
            Check this box to have your password 
            delivered to your mailbox, so you won't lose it.
            </span>
        </div>

        <div class="row" tal:condition="allowEnterPassword">
            <span class="label">NOTE</span>
            <span class="field">
            This portal has been configured to automatically generate and 
            email you a password to complete the registration process.
            </span>
            <span class="info">
            </span>
        </div>

        <div class="row">
            <span class="label"></span>
            <span class="field">
                <input class="context" type="submit" name="submit" value="Register">
            </span>
        </div>

    </form>
</div>

</body>
</html>

