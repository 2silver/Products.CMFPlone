<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master">

<body>

<div metal:fill-slot="super">

    <div metal:use-macro="here/portal_tabs/macros/folderTabs">
    Content tabs
    </div>

    <div class="contentBar">        
    &nbsp;
    </div>	

</div>

<div metal:fill-slot="main"
     tal:define="syndicateInfo here/syndication_information | nothing">
     
    <script language="JavaScript"
            src="/calendar.js"
            tal:attributes="src string:${here/portal_url}/calendar.js">
    </script>
				
    <h1 i18n:translate="">Syndication Properties</h1>
    
    <p i18n:translate="">
    Syndication enables you to syndicate this folder so it can
    be synchronized from other web sites.
    </p>

    <script language="JavaScript" src="cmf_skin_tools/calendar.js"></script>
    
    <form action="disableSyndication" 
          name="disable" 
          method="post"
          tal:condition="syndicateInfo">
          
        <input type="hidden" name="isAllowed:int" value="0" />

        <input class="standalone" type="submit" value="Disable Syndication" />
    </form>

    <form action="enableSyndication" 
          name="enable" 
          method="post"
          tal:condition="python:not syndicateInfo">
        
        <input type="hidden" name="isAllowed:int" value="1"> 

        <input class="standalone" type="submit" value="enable syndication" />
    </form>


    <span tal:condition="python:container.portal_syndication.isSiteSyndicationAllowed()">

        <span tal:condition="python:container.portal_syndication.isSyndicationAllowed(here)">

            <div class="group">
                <span class="legend" i18n:translate="">Channel Details</span>

                <div class="row">
                    <div class="label">Channel Title</div>
                    <div class="info" tal:content="here/Title">title</div>
                </div>

                <div class="row">
                    <div class="label">Channel Description</div>
                    <div class="info" tal:content="here/Description">description</div>
                </div>
            </div>

            <form id="edit_form"
	          class="group"
                  action="editSynProperties" 
                  name="syndication" 
                  method="post">

                <span class="legend" i18n:translate="">Syndication Details</span>

                <div class="row">
                    <div class="label">
                    <span i18n:id="update_period">Update Period</span>
                    <div id="update_period_help" 
                         i18:id="update_period_help"
                         class="help" 
                         style="visibility:hidden">
                    Controls how often the channel is updated.
                    </div>
                </div>
                    
                <div class="field">
                    <select name="updatePeriod"
                            tabindex="1"
                            onfocus="formtooltip('update_period_help',1)" 
                            onblur="formtooltip('update_period_help',0)"
                            >
                        <option value=""
                                tal:repeat="period python:container.portal_syndication.buildUpdatePeriods()"
                                tal:attributes="value python:period[0];
                                selected python:test(period[0]==container.portal_syndication.getUpdatePeriod(here), 'selected', '');"
                                tal:content="python:period[1]"> 
                                update interval 
                        </option>
                    </select>
                </div>
            </div>

            <div class="row">
                <div class="label">
                    <span i18n:id="update_frequency">Update Frequency</span>
                    <div id="update_frequency_help" 
                         i18:id="update_frequency_help"
                         class="help" 
                         style="visibility:hidden">
                    Controls the frequency of the updates. For example, if you wnat it to update every second week,
                    select "weekly" above, and "2" here.
                    </div>
                </div>
                
                <div class="field">
                    <input type="text" 
                           name="updateFrequency" 
                           size="3"
                           value="#" 
                           tabindex="2"
                           onfocus="formtooltip('update_frequency_help',1)" 
                           onblur="formtooltip('update_frequency_help',0)" 
                           tal:attributes="value python:container.portal_syndication.getUpdateFrequency(here)" />
                </div>
            </div>
			
            <div class="row">
			
                <div class="label">
                    <span i18n:id="update_base">Update Base</span>

                    <div id="update_base_help" 
                         i18:id="update_base_help"
                         class="help" 
                         style="visibility:hidden">
                    This is the date the updater starts counting from. 
                    So if you want to update weekly every Tuesday,
                    make sure this starts on a Tuesday.
                    </div>
                </div>
				
                <div class="field"
		     tal:define="inputname  string:updateBase;
                                 formname   string:edit_form;
                                 inputvalue python:test(container.portal_syndication.getUpdateBase(here), container.portal_syndication.getUpdateBase(here), 'None');">
                    <div metal:use-macro="here/calendar_support/macros/calendarDatePickerBox">
                        a calendar, hopefully
                    </div>
		</div>
    
            <div class="row">
                <div class="label">
                    <span i18n:id="max_items">Maximum Items</span>
                    
                    <div id="max_items_help" 
                         i18:id="max_items_help"
                         class="help" 
                         style="visibility:hidden">
                    Maximum number of items that will be syndicated. 
                    </div>
                </div>
                
                <div class="field">
                    <input type="text" 
                           name="max_items"	
                           value="#" 
                           size="3"
                           tabindex="4"
                           onfocus="formtooltip('max_items_help',1)" 
                           onblur="formtooltip('max_items_help',0)"
                           tal:attributes="value python:container.portal_syndication.getMaxItems(here)" />
                </div>
            </div>
    			
            <div class="row">
                <div class="label">&nbsp;</div>
                <div class="field">
                    <input class="context" 
                           tabindex="5"
                           type="submit" 
                           value="Save" 
                           />
                </div>
            </div>

            </form>

        </span>

 </span>

</div>


<div tal:condition="python:not container.portal_syndication.isSiteSyndicationAllowed()"
     i18n:translate="">
  Syndication has not been enabled by site administrator.
</div>


</body>
</html>
