<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master">

<tal:block metal:fill-slot="head_slot">
   <tal:block tal:define="dummy python:request.set('disable_border',1)" />
</tal:block>

<body>

<div metal:fill-slot="main"
     tal:define="errors python:request.get('errors', {});
                Batch python:modules['ZTUtils'].Batch;
                b_start python:request.get('b_start',0);"
     tal:condition="here/rejectAnonymous" >
	
    <h1 i18n:translate="">Groups Management</h1>

    <p i18n:translate="">
    Groups are logical collections of users, like departments and business units.
    They are not directly related to permissions on a global level, you normally
    use Roles for that - and let certain Groups have a particular role.
    </p>

    <form action=""
          name="groups"
          method="post"
          tal:attributes="action here/absolute_url"
          tal:define="portal_users python: here.portal_membership.listMembers();
                      batch python:Batch(portal_users, 25, int(b_start), orphan=1)">

       <input class="standalone add"
              tabindex=""
              type="submit"
              name="portal_form/join_form:method"
              value="Add New Group"
              tal:attributes="tabindex tabindex/next;"
              />

       <input class="quickSearch"
              tabindex=""
              type="text"
              name=""
              value="Quick Search"
              tal:attributes="tabindex tabindex/next;"
              />
               

        <table class="listing"
               tal:condition="portal_users">
               
            <tr>
                <th rowspan="2">Group name</th>
                <th colspan="3">Roles</th>
                <th rowspan="2">Remove Group</th>
            </tr>
            <tr>
                <th>Manager</th>
                <th>Member</th>
                <th>Reviewer</th>
            </tr>
            
            <metal:block tal:repeat="this_user batch">
            
            <tr tal:define="oddrow repeat/this_user/odd"
                 tal:attributes="class python:test(oddrow,'odd','even')">
            
            <metal:block tal:define="roles python: this_group.getRoles();
                                     groupname python: this_group.getGroupName()">
         
            <td>
                <a href="XXX_prefs_group_management_individual_form">
                   
                    <img src=""
                         tal:replace="structure portal/group.gif" />&nbsp;<span 
                         tal:replace="groupname">group name</span>
                </a>
            </td>
            
            <td class="checkbox">
                <input type="checkbox" 
                       class="noborder"
                       name="name"
                       value="Manager"
                       tal:attributes="checked python:test( 'Manager' in roles, 'checked', '');
                                       name string:roles-${username}:list" />
            </td>
            
            <td class="checkbox">
                <input type="checkbox"
                       class="noborder"
                       name="name"
                       value="Member"
                       tal:attributes="checked python:test( 'Member' in roles, 'checked', '');
                                       name string:roles-${username}:list" />
            </td>
            
            <td class="checkbox">
                <input type="checkbox"
                       class="noborder"
                       name="name" 
                       value="Reviewer"
                       tal:attributes="checked python:test( 'Reviewer' in roles, 'checked', '');
                                       name string:roles-${username}:list" />
            </td>
          
            <td class="checkbox">
                <input type="checkbox"
                       class="noborder notify"
                       name="delete:list"
                       value="value"
                       tal:attributes="value groupname" />
            </td>
            
            </metal:block>
        </tr>
        </metal:block>
        </table>

        <input class="context"
               tabindex="" 
               type="submit" 
               name="prefs_user_manage:method" 
               value="Save Changes"
               tal:attributes="tabindex tabindex/next;"
               />

    </form>

    <h1 i18n:translate="">Roles Management</h1>

    <p i18n:translate="">
    Roles are collections of permissions. The most common role is the Member
    role, which is any member of the portal. You can define additional roles,
    but you normally only do that when you need to create a new discrete unit
    of permissions that you can combine to make up a Group.
    </p>
    
    
</div>

</body>
</html>

