<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone"      i18n:domain="plone"
>

<tal:block metal:fill-slot="base">
   <tal:block tal:define="dummy python:request.set('disable_border',1)" />
</tal:block>

<body>
			
<div metal:fill-slot="main"
     tal:define="errors python:request.get('errors', {});
                 Iterator python:modules['Products.CMFPlone'].IndexIterator;
                 tabindex python:Iterator();"
     tal:condition="here/rejectAnonymous" >

    
    <span tal:define="dummy python:request.response.setHeader('pragma','no-cache')" />

    <h1 i18n:translate="">Member Preferences</h1>

    <p> 
        <a href="password_form" i18n:translate="">Click here</a> 
        <span i18n:translate="">to change your password</span>. 
    </p>
      
  
    <metal:block tal:condition="not: here/portal_membership/isAnonymousUser"
                 tal:define="member container/portal_membership/getAuthenticatedMember | nothing">

        <form class="group"
              action="personalize" 
              method="post"
              enctype="multipart/form-data" 
              tal:condition="member"
              tal:attributes="action request/URL">
        
            <span class="legend">Member Details</span>
		
            <div class="row"
	         tal:define="error_email errors/email | nothing;
                             email request/email|member/email;">
                
                <div class="label required">
                    <span i18n:id="new_email">New e-mail <br /> address</span>

                    <div id="new_email_help"
                         i18n:id="new_email_help" 
                         class="help" 
                         style="visibility:hidden">
                    Enter your new e-mail address here, if you want to change it.
                    </div>
                </div>
                
                <div class="field" tal:attributes="class python:test(error_email, 'field error', 'field')"> 
                    
                    <div tal:condition="error_email" 
                         tal:replace="structure string:$error_email <br />" />					  
                    
                    <input type="text" 
                           name="email" 
                           size="25"
                           tabindex=""
                           value="member.email html_quote"
                           onfocus="formtooltip('new_email_help',1)" 
                           onblur="formtooltip('new_email_help',0)" 
                           tal:attributes="value email;
                                           tabindex tabindex/next;" 
                           />
                </div>

            </div>

            <div class="row">
                <div class="label">
                    <span i18n:id="wysiwyg_editor">WYSIWYG editor</span>
                    
                    <div id="wysiwyg_editor_help"
                         i18n:id="wysiwyg_editor_help"
                         class="help"
                         style="visibility:hidden">
                    Select the editor that you would like to use for editing
                    content more easily.  What You See Is What You Get editors
                    often have browser requirements.
                    </div>
                </div>
                <div class="field"
                     tal:define="wysiwyg_editor python:request.get('wysiwyg_editor', member.wysiwyg_editor)">
                     <select name="wysiwyg_editor"
                             onfocus="formtooltip('wysiwyg_editor_help',1)"
                             onblur="formtooltip('wysiwyg_editor_help',0)"
                             tabindex=""
                             tal:attributes="tabindex tabindex/next;">
                         <tal:block tal:repeat="editor here/portal_properties/available_editors">
                         <option value="None"
                                 tal:attributes="value editor;
                                                 selected python:test(editor==wysiwyg_editor, 'selected', '');"
                                 tal:content="editor">
                         None
                         </option>
                         </tal:block>
                     </select>
                </div>
             </div>
             
            <div class="row">
                <div class="label">
                    <span i18n:id="listed_status">Listed status</span>

                    <div id="listed_status_help"
                         i18n:id="listed_status_help" 
                         class="help" 
                         style="visibility:hidden">
                    Select whether you want to be listed on the public membership listing
                    or not.	Remember that your Member folder will still be publicly accessible unless
                    you change its security settings, even if you select "unlisted" here.
                    </div>                
                </div>
                <div class="field"
		                 tal:define="listed python:request.get('listed', member.listed);
                                 tabindex tabindex/next;">
                    <input type="radio" 
                           class="noborder" 
                           name="listed" 
                           value="on"
                           id="cb_listed" 
                           checked="checked"
                           tabindex=""
                           onfocus="formtooltip('listed_status_help',1)" 
                           onblur="formtooltip('listed_status_help',0)"
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="listed" 
                           />
                           
                    <input type="radio" 
                           class="noborder" 
                           name="listed" 
                           value="on"
                           id="cb_listed"
                           tabindex=""
                           onfocus="formtooltip('listed_status_help',1)" 
                           onblur="formtooltip('listed_status_help',0)"
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="not: listed" 
                           />
                    
                    <label for="cb_listed">Listed</label>
                    
                    <br />
                    
                    <input type="radio" 
                           class="noborder" 
                           name="listed" 
                           value=""
                           id="cb_unlisted"
                           tabindex=""
                           onfocus="formtooltip('listed_status_help',1)" 
                           onblur="formtooltip('listed_status_help',0)"
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="listed" 
                           />
                    
                    <input type="radio" 
                           class="noborder" 
                           name="listed" 
                           value=""
                           id="cb_unlisted" 
                           checked="checked"
                           tabindex=""
                           onfocus="formtooltip('listed_status_help',1)" 
                           onblur="formtooltip('listed_status_help',0)"
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="not: listed " 
                           />		   
                    
                    <label for="cb_unlisted">Unlisted</label>
                </div>
            </div>

            <div class="row">
                <div class="label">
                    <span i18n:id="formtooltips_status">Display form tooltips</span>

                    <div id="formtooltips_help"
                         i18n:id="formtooltips_help" 
                         class="help" 
                         style="visibility:hidden">
                    Select whether you want form tooltips to be displayed.
                    </div>                
                </div>
                <div class="field"
                     tal:define="formtooltips python:request.get('formtooltips', member.formtooltips);
                     tabindex tabindex/next;"> 
                    <input type="radio" 
                           class="noborder" 
                           name="formtooltips" 
                           value="on"
                           id="cb_formtooltips" 
                           checked="checked"
                           tabindex=""
                           onfocus="formtooltip('formtooltips_help',1)" 
                           onblur="formtooltip('formtooltips_help',0)"
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="formtooltips" 
                           />
                           
                    <input type="radio" 
                           class="noborder" 
                           name="formtooltips" 
                           value="on"
                           id="cb_formtooltips"
                           tabindex=""
                           onfocus="formtooltip('formtooltips_help',1)" 
                           onblur="formtooltip('formtooltips_help',0)"
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="not: formtooltips" 
                           />
                    
                    <label for="cb_formtooltips">Yes</label>
                    
                    <br />
                    
                    <input type="radio" 
                           class="noborder" 
                           name="formtooltips" 
                           value=""
                           id="cb_noformtooltips"
                           tabindex=""
                           onfocus="formtooltip('formtooltips_help',1)" 
                           onblur="formtooltip('formtooltips_help',0)"
                           tal:attributes="tabindex tabindex;"
                           tal:condition="formtooltips" 
                           />
                    
                    <input type="radio" 
                           class="noborder" 
                           name="formtooltips" 
                           value=""
                           id="cb_noformtooltips" 
                           checked="checked"
                           tabindex=""
                           onfocus="formtooltip('formtooltips_help',1)" 
                           onblur="formtooltip('formtooltips_help',0)"
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="not: formtooltips" 
                           />		   
                    
                    <label for="cb_noformtooltips">No</label>
                </div>
            </div>


            <div class="row">
                <div class="label">
                    <span i18n:id="visible_ids_status">Display content ids</span>

                    <div id="visible_ids_help"
                         i18n:id="visible_ids_help" 
                         class="help" 
                         style="visibility:hidden">
                    Select whether you want ids to be visible when editing contents.
                    </div>                
                </div>
                <div class="field"
           	         tal:define="visible_ids python:request.get('visible_ids', member.visible_ids);
                                 tabindex tabindex/next;"> 
                    <input type="radio" 
                           class="noborder" 
                           name="visible_ids" 
                           value="on"
                           id="cb_visible_ids" 
                           checked="checked"
                           tabindex=""
                           onfocus="formtooltip('visible_ids_help',1)" 
                           onblur="formtooltip('visible_ids_help',0)"
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="visible_ids" 
                           />
                           
                    <input type="radio" 
                           class="noborder" 
                           name="visible_ids" 
                           value="on"
                           id="cb_visible_ids"
                           tabindex=""
                           onfocus="formtooltip('visible_ids_help',1)" 
                           onblur="formtooltip('visible_ids_help',0)" 
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="not: visible_ids" 
                           />
                    
                    <label for="cb_visible_ids">Yes</label>
                    
                    <br />
                    
                    <input type="radio" 
                           class="noborder" 
                           name="visible_ids" 
                           value=""
                           id="cb_invisibleids"
                           tabindex=""
                           onfocus="formtooltip('visible_ids_help',1)" 
                           onblur="formtooltip('visible_ids_help',0)" 
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="visible_ids" 
                           />
                    
                    <input type="radio" 
                           class="noborder" 
                           name="visible_ids" 
                           value=""
                           id="cb_invisible_ids" 
                           checked="checked"
                           tabindex=""
                           onfocus="formtooltip('visible_ids_help',1)" 
                           onblur="formtooltip('visible_ids_help',0)" 
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="not: visible_ids" 
                           />		   
                    
                    <label for="cb_invisible_ids">No</label>
                </div>
            </div>


            <div class="row" 
                 tal:condition="here/portal_skins/allow_any">
                
                <div class="label">
                    <span i18n:id="skin">Skin</span>
                    <div id="skin_help"
                         i18n:id="skin_help" 
                         class="help" 
                         style="visibility:hidden">
                    Here you choose the appearance of the site. Several styles are available,
                    and you can always change it back to the default if you do not like a skin.
                    </div>
                </div>
                
                <div class="field"
		     tal:define="skinvar python:request.get(here.portal_skins.getRequestVarname(), '');
                         skindefault here/portal_skins/getDefaultSkin;
                         skincurrent python:test(skinvar, skinvar, skindefault);"> 
                    <select name="portal_skin"
                            tabindex=""
                            onfocus="formtooltip('skin_help',1)" 
                            onblur="formtooltip('skin_help',0)"
                            tal:attributes="tabindex tabindex/next;" 
                            >
                    <option value="#"
                            tal:repeat="skin container/portal_skins/getSkinSelections"
                            tal:attributes="value skin;
                            selected python:test(skincurrent==skin, 'selected', '');"
                            tal:content="skin">Plone</option>
                    </select>
                </div>
            </div>

            <div class="row"
                 tal:define="portrait here/getPlonePersonalPortait | nothing;
                             home python:container.portal_membership.getHomeUrl(member.getId())"
                 tal:condition="home">
                <div class="label">
                    <span i18n:id="portrait">Portrait</span>
                    <div id="portrait_help"
                         i18n:id="portrait_help" 
                         class="help" 
                         style="visibility:hidden">
                    To add a new portrait, click the <strong>Browse</strong> button and select
                    a picture of yourself. Recommended size is 75 pixels wide, 100 pixels tall. <br />
                    </div>
                    
                </div>
                <div class="field"> 

                    <input type="file" 
                           name="portrait" 
                           size="20" 
                           tabindex=""
                           onfocus="formtooltip('portrait_help',1)" 
                           onblur="formtooltip('portrait_help',0)"
                           tal:attributes="tabindex tabindex/next;" 
                           />
                    <br />
                    
                    <img src="" 
                         style="border: 1px solid black" 
                         tal:condition="portrait"
                         tal:attributes="src portrait/absolute_url" 
                         />
                </div>
            </div>

            <div class="row">
                <div class="label">&nbsp;</div>
                <div class="field">
                    <input class="context"
                           tabindex="" 
                           type="submit" 
                           value="Apply" 
                           tal:attributes="tabindex tabindex/next;" 
                           />
                </div>
            </div>
            
            <span tal:replace="nothing">
            ##### HIDDEN VARIABLES FOR THE FORM_TOOL -- CUT AND PASTE THESE INTO YOUR FORM ####
            </span>
            <input type="hidden" name="form_submitted" value="1" tal:attributes="value template/id" >
                        
		</form>

    </metal:block>
	
    
</div>
	   
</body>
</html>

