<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">

<tal:block metal:fill-slot="head_slot">
   <tal:block tal:define="dummy python:request.set('disable_border',1)" />
</tal:block>

<body>

<div metal:fill-slot="main"
     tal:define="errors options/state/getErrors;">

    <h1 i18n:translate="heading_registration_form">Please register</h1>

    <p i18n:translate="description_registration_form">
    By registering with us, you will have your own account with the
    possibility to have personalized content, and you will be able to add
    your own documents, images and files to the site.
    </p> 

    <form action="" 
          method="post"
          tal:define="allowEnterPassword here/portal_properties/site_properties/validate_email|nothing;"
          tal:attributes="action template/getId" >

        <fieldset>

            <legend i18n:translate="legend_personal_details">Personal Details</legend>
    
            <input type="hidden" name="came_from" value=""
                   tal:condition="request/came_from|nothing"
                   tal:attributes="value request/came_from" />
            <input type="hidden" name="last_visit:date" value="ZopeTime"
                   tal:attributes="value here/ZopeTime" />
            <input type="hidden" name="prev_visit:date" value="ZopeTime"
                   tal:attributes="value here/ZopeTime" />
            <input type="hidden" name="came_from_prefs" value=""
                   tal:attributes="value request/came_from_prefs|nothing" />
    
            <div class="row"
                 tal:define="error errors/fullname| nothing;
                             fullname request/fullname | nothing;"
                 tal:attributes="class python:test(error, 'field error', 'field')">
                
                <label i18n:translate="label_full_name">Full Name</label>
    
                <div class="formHelp" i18n:translate="help_full_name_creation">
                Enter your full name, eg. John Smith.
                </div>
                
                <div tal:content="error">Validation error output</div>
    
                <input type="text" 
                       name="fullname" 
                       size="30"
                       value="fullname"
                       tabindex=""
                       tal:attributes="value fullname;
                                       tabindex tabindex/next;"
                       />
    
            </div>
                   
            <div class="field"
                 tal:define="error errors/username| nothing;
                             username request/username | nothing;"
                 tal:attributes="class python:test(error, 'field error', 'field')">
                
                <label i18n:translate="label_user_name">User Name</label>
    
                <span class="fieldRequired" title="Required"
                      i18n:attributes="title"
                      i18n:translate="label_required">(Required)</span>
    
                <div i18n:translate="help_user_name_creation_casesensitive"
                     class="formHelp">
                Enter the user name you want, usually something like
                'jsmith'. No spaces or special characters. 
                Usernames and passwords are case sensitive, 
                make sure the caps lock key is not enabled.
                This is the name you use to log in.
                </div>
                
                <div tal:content="error">Validation error output</div>
    
                <input type="text" 
                       name="username" 
                       size="30"
                       value="username"
                       tabindex=""
                       tal:attributes="value username;
                                       tabindex tabindex/next;"
                       />
            </div>
    
            <div class="field"
                 tal:define="error errors/email | nothing;
                             email request/email | nothing;"
                 tal:attributes="class python:test(error, 'field error', 'field')">
    
                <label i18n:translate="label_email">E-mail</label>
    
                <span class="fieldRequired" title="Required"
                      i18n:attributes="title"
                      i18n:translate="label_required">(Required)</span>
    
                <div class="formHelp" i18n:translate="help_email_creation">
                Enter your email address. This is necessary in case you lose your
                password. We respect your privacy, and will not give the address
                away to any third parties or expose it at the site.
                </div>
    
                <div tal:content="error">Validation error output</div>
    
                <input type="text" 
                       name="email" 
                       size="30"
                       tabindex=""
                       tal:attributes="value email;
                                       tabindex tabindex/next;"
                       />
            </div>
    
    
            <div class="field" 
                 tal:condition="not: allowEnterPassword"
                 tal:define="error errors/password | nothing;
                             password request/password | nothing;" 
                 tal:attributes="class python:test(error, 'field error', 'field')">
    
                <label i18n:translate="label_password">Password</label>
    
                <span class="fieldRequired" title="Required"
                      i18n:attributes="title"
                      i18n:translate="label_required">(Required)</span>
    
                <div class="formHelp" i18n:translate="help_password_creation">
                Enter the password you want. Minimum 5 characters.
                </div>
    	       
                <div tal:content="error">Validation error output</div>
    
                <input type="password" 
                       name="password" 
                       size="10"
                       value="" 
                       tabindex=""
                       tal:attributes="value password;
                                       tabindex tabindex/next;" 
                       />
            </div>
    
            <div class="field" 
                 tal:condition="not: allowEnterPassword"
                 tal:define="error errors/confirm | nothing;
                             confirm request/confirm | nothing;"
                 tal:attributes="class python:test(error, 'field error', 'field')">
                             
                <label i18n:translate="label_confirm_password">Confirm Password</label>
    
                <span class="fieldRequired" title="Required"
                      i18n:attributes="title"
                      i18n:translate="label_required">(Required)</span>
    
                <div class="formHelp" i18n:translate="help_confirm_password">
                Re-enter the password. Make sure the passwords are identical.
                </div>
                
                <div tal:content="error">Validation error output</div>
    
                <input type="password" 
                       name="confirm" 
                       size="10" 
                       value="" 
                       tabindex=""
                       tal:attributes="value confirm;
                                       tabindex tabindex/next;"
                       />
            </div>
    
            <div class="field" 
                 tal:condition="not: allowEnterPassword" 
                 tal:define="mail_me request/mail_me|nothing">
                            
                <label i18n:translate="label_mail_password">Mail Password?</label>
    
                <input type="checkbox" 
                       class="noborder" 
                       name="mail_me" 
                       size="30" 
                       id="cb_mailme" 
                       tabindex=""
                       tal:attributes="checked python:test(mail_me, 'checked', None);
                                       tabindex tabindex/next;" 
                       />
                <label for="cb_mailme" i18n:translate="label_yes_mail_password">Yes, send a mail containing the password</label>
            </div>
    
            <div class="field" 
                 tal:condition="allowEnterPassword">
    
                <div class="formHelp" i18n:translate="label_password_will_be_mailed">
                A password will be generated and 
                e-mailed to you to complete the registration process.
                </div>
            </div>
    
            <div class="formControls">
                <input class="context" 
                       type="submit"
                       tabindex="" 
                       name="form.button.Register" 
                       value="Register"
                       i18n:attributes="value"
                       tal:attributes="tabindex tabindex/next;" />
            </div>

        </fieldset>
        
        <input type="hidden" name="form.submitted" value="1" />

    </form>
</div>

</body>
</html>

