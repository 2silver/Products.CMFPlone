<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master">

<body>

 <span metal:fill-slot="main"
       tal:define="review_state python:here.portal_workflow.getInfoFor(here, 'review_state');
                   review_history python: here.portal_workflow.getInfoFor(here, 'review_history');">

   <script language="JavaScript" src="cmf_skin_tools/calendar.js"></script> 

    <h1>Publish item</h1>
   
    <p>
    A <strong>published</strong> item is available to the general
    member base and anonymous visitors. <br/>
    Another way to control the visibility of an item is with its <strong>effective
    date</strong>. An item is not publicly available before its effective date,
    <em>even if its status is <strong>published</strong></em>.
    </p>
   
    <form class="group"
          name="content_publish_form" 
          method="post" 
          action="content_status_modify">
    
        <span class="legend">Item Comments</span>

        <input type="hidden" name="workflow_action" value="publish" />

        <div class="row">
            <span class="label">Status</span>
            <span class="field" >
                This item is currently in <strong tal:content="review_state">review_state;</strong> status.
            </span>
       </div>
    
        <div class="row">
            <span class="label">Comments</span>
            <span class="field">
                <textarea name="comment" cols="60" rows="5" wrap="soft" style="width: 100%"></textarea>
            </span>
        </div>
    
        <div class="row">
            <span class="label">Expiration Date</span>
    
            <span class="field"><input type="text" name="expiration_date" size="25" value="2000-12-31 00:00:00" tal:attributes="value python:test(here.ExpirationDate(), '', here.ExpirationDate())">
                    <a href="javascript:doNothing()" onclick="setDateField(document.content_publish_form.expiration_date);top.newWin = window.open('cmf_skin_tools/calendar.html','cal','dependent=yes,width=310,height=230,screenX=200,screenY=300,titlebar=yes')">
                    <img src="popup_calendar.gif">
                    </a>
            </span>
        
            <span class="info">
                    The date when the document expires. This will automatically make the document
                    invisible for others at the given date.
            </span>
        </div>
    
    
        <div class="row">
            <span class="label">&nbsp;</span>
            <span class="field"><input class="context" type="submit" value=" Publish this Item "></span>
            <span class="info">&nbsp;</span>
        </div>

    </form>

    <div class="group">
        <span class="legend">History</span>
        
        <div tal:repeat="items python: here.reverseList(review_history)">
            <span tal:replace="python: items['time'].aCommon()" />
            <span tal:replace="items/action" />
            <span tal:condition="items/effective_date|nothing">
             (effective: <span tal:replace="python: items['effective_date'].aCommon()"></span>)
            </span>
            by <span tal:replace="items/actor">Actor</span><br>
            
            <div tal:define="rhComments items/comments"
                tal:replace="rhComments">Comments</div>
        </div>
    </div>

   
 </span>
	   
</body>
</html>
