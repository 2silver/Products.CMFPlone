<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master">

<body>

    <div metal:fill-slot="super1">

        <div metal:use-macro="here/portal_tabs/macros/folderTabs">
        Content tabs
        </div>

        <div class="contentBar">        
        &nbsp;
        </div>	

    </div>

    <div metal:fill-slot="main"
         tal:define="dummy here/filterCookie;
                     folderfilter python:request.get('folderfilter', '');
                     global decodedFilter python:here.decodeFolderFilter(folderfilter);
                     global filterValues decodedFilter;
                     global filter decodedFilter;
                     global portal_url here/portal_url">


<!-- Folder content has items -->

        <form name="folderContentsForm"
              method="post"
              action="folder_object"
              tal:attributes="action here/absolute_url"
              tal:define="global folder_contents python:here.listFolderContents( contentFilter=filter ); 
                          b_start python:request.get('b_start', 0);
                          results python:here.sortObjectValues(folder_contents);
                          global DateTime python:modules['DateTime'].DateTime;
                          Batch python:modules['ZTUtils'].Batch;
                          global batch python:Batch(results, 5000, int(b_start), orphan=0)"
              tal:condition="results" >

            <input type="hidden" name="filter_state" value="set_view_filter" />

            <div class="title"> 

                <img src="folder.gif" alt="Folder" tal:attributes="src string:$portal_url/folder.gif" /> 

                <span class="folderName" tal:condition="python: user.getUserName()==here.getId()">
                My Stuff
                </span> 

                <span class="folderName" tal:condition="python: user.getUserName()!=here.getId()" tal:content="here/title_or_id">
                Directory Id
                </span> 

                <!-- Add Item pulldown -->
                <select name="type_name" >
                    <option value="Select">Select</option>
                    <metal:block tal:repeat="ctype here/allowedContentTypes"
                                 tal:define="global filterOut  python:['Favorite']">
                    <option value="Document"
                            tal:condition="python: ctype.getId() not in filterOut"
                            tal:attributes="value ctype/getId"
                            tal:content="ctype/getId">Document</option>
                    </metal:block>
                </select>
    
                <input class="standalone" type="submit" name="folder_factories:method" value="Add New Item" />

            </div>


            <table id="sortable"
                   class="listing"
                   summary="Content listing"
                   cellpadding="0" cellspacing="0"
                   metal:define-macro="folder_listing">

                <thead> 
                    <tr>
                        <th>&nbsp;</th>
                        <th>Title</th>
                        <th>Type</th>
                        <th>Size</th>
                        <th>Modified</th>
                        <th>Status</th>
                    </tr>
                </thead>

                <tbody>
                <metal:block tal:repeat="item batch"> 
                    <tr tal:define="oddrow repeat/item/odd"
                      tal:attributes="class python:test(oddrow, 'even', 'odd')" > 

                        <td>
                            <input type="checkbox" class="noborder" name="ids:list" id="#"
                                   value="#"
                                   tal:attributes="value item/getId;
                                                   id python: 'cb_'+item.getId();
                                                   checked request/ids_checked|nothing;"/>
                        </td>

                        <td tal:define="action python:item.getTypeInfo().getActionById('view');
                                        url python:test(action, item.absolute_url()+'/'+action, item.absolute_url()+'/folder_contents');"> 

                            <a href="#" tal:attributes="href url">
                                <img src="" alt="Folder" border="0"
                                     height="16"
                                     width="16"
                                     tal:attributes="src item/getIcon;
                                                     alt item/Type;"
                             />&nbsp;<span tal:replace="item/title_or_id">Title</span>
                            </a> 

                          <span class="expired"
                                tal:condition="python:container.isExpired(item)">expired</span>
                        </td>

                        <td tal:content="item/Type">
                        folder
                        </td>

                        <td tal:define="size python:here.getObjSize(item)"
                            tal:content="structure python:test(size, size, '&nbsp;')">
                        size
                        </td>

                        <td tal:content="python:here.toPortalTime(item.ModificationDate())">
                        08/19/2001 03:01 AM 
                        </td>

                        <td class="private"
                            tal:define="review_state python:container.portal_workflow.getInfoFor(item, 'review_state', '')"
                            tal:content="structure python:test(review_state, review_state, '&nbsp;')"
                            tal:attributes="class python:test(review_state, review_state, 'private')">&nbsp;
                        </td>
                    </tr>
                </metal:block>
                </tbody> 
            </table>

            <input class="context" type="submit" name="folder_rename_form:method" value="Rename" />
            <input class="context" type="submit" name="folder_cut:method" value="Cut" /> 
            <input class="context" type="submit" name="folder_copy:method" value="Copy" />
            <input tal:condition="here/cb_dataValid | nothing"
                   class="context" type="submit" name="folder_paste:method" value="Paste" />
            <input class="context" type="submit" name="folder_delete:method" value="Delete" />
            <input class="context" type="submit" name="content_publishing_history:method" value="Change Status" />

            <!-- Filter pulldown -->
            <span tal:define="filterValues decodedFilter/keys | nothing;
                              types python:container.portal_types.listContentTypes();"
                  tal:condition="here/listFolderContents">


                Show:

                <select name="filter_by_Type:list" onChange="submitFilterAction()"
                        tal:define="global filterTypes python:test( filterValues==nothing, types, here.filterTypes(filter));" >

                    <option value="#" 
                            tal:attributes="selected python:test((len(filterTypes)>1 or len(filterTypes)==0), 'selected', '');">
                    All objects
                    </option>  

                    <option value="#"
                            tal:repeat="type types"
                            tal:content="python:type+'s only'"
                            tal:attributes="value type;
                                            selected python:test( len(filterTypes)==1 and (type in filterTypes), 'selected', '');"
                    >Filtered type</option>
                </select>

                <input type="hidden" name="filter_by_Subject:tokens" value="" />
                <!--you can filter by subject keywords by filling in this value-->
            </span>

        </form>



<!-- Folder content is empty -->

        <metal:block tal:condition="python:not folder_contents">

            <div class="title">
                <img src="folder.gif" alt="Folder" tal:attributes="src string:$portal_url/folder.gif" /> 
                <span class="folderName" tal:condition="python: user.getUserName()==here.getId()">
                My Stuff
                </span> 

                <span class="folderName" tal:condition="python: user.getUserName()!=here.getId()" tal:content="here/title_or_id">
                Directory Id
                </span> 

                <!-- Add Item pulldown -->
                <form class="inline" name="create" action="folder_factories" method="post">
                    <select name="type_name" >
    
                        <option value="Select">Select</option>
    
                        <metal:block tal:repeat="ctype here/allowedContentTypes"
                                     tal:define="global filterOut  python:['Favorite']">
                        <option value="Document"
                                tal:condition="python: ctype.getId() not in filterOut"
                                tal:attributes="value ctype/getId"
                                tal:content="ctype/getId"
                        >Document</option>
                        </metal:block>
    
                    </select>
    
                    <input class="standalone" type="submit" value="Add New Item" />
                </form>

                <p>
                This folder is empty. To add content, press the "Add New Item" button,
                or paste content from another location.
                </p>

                <form method="post" action="" tal:attributes="action here/absolute_url">
    
                    <input tal:condition="here/cb_dataValid | nothing"
                           class="context" 
                           type="submit" 
                           name="folder_paste:method" 
                           value="Paste" /> 
                </form>

            </div>

            <div tal:define="syndicateInfo here/syndication_information | nothing;
                             siteSyndicationAllowed container/portal_syndication/isSiteSyndicationAllowed;">

                <!-- Filter pulldown -->
                <form name="folderContentsForm" method="GET" action="#"
                      tal:condition="here/listFolderContents"
                      tal:attributes="action here/absolute_url" >
    
                    <input type="hidden" name="filter_state" value="set_view_filter"/>
    
                    <div class="viewFilter"
                         tal:define="filterValues decodedFilter/keys | nothing;
                                     types python:container.portal_types.listContentTypes();">
    
                        <select name="filter_by_Type:list" onChange="submitFilterAction()"
                                tal:define="global filterTypes python:test( filterValues==nothing, types, here.filterTypes(filter));">
    
                            <option value="#" 
                                    tal:attributes="selected python:test((len(filterTypes)>1 or len(filterTypes)==0), 'selected', '');">
                            All objects
                            </option>             
    
                            <option value="#"
                                    tal:repeat="type here/portal_types/objectIds"
                                    tal:content="python:type+' only'"
                                    tal:attributes="value type;
                                                    selected python:test( len(filterTypes)==1 and (type in filterTypes), 'selected', '');"
                              >Filtered type
                            </option>
    
                        </select>
    
                        <!--you can filter by subject keywords by filling in this value-->
                        <input type="hidden" name="filter_by_Subject:tokens" value="" />
    
                    </div>
                </form>

            </div>

        </metal:block>

    </div>


</body>
</html>
