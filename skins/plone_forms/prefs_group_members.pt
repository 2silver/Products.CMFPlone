<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master">

<tal:head metal:fill-slot="head_slot"
          tal:define="dummy python:request.set('disable_border',1)" />

<body>

<div metal:fill-slot="main"
     tal:define="errors python:request.get('errors', {});
                 acl_users here/acl_users;
                 portal_roles mtool/getPortalRoles;
                 gtool here/portal_groups;
                 gdtool here/portal_groupdata;
                 groupname request/groupname|nothing;
                 grouproles python:request.set('grouproles', []);
                 group python:gtool.getGroupById(groupname)">

    <tal:conditional condition="group">
        <tal:defines define="dummy python:request.set('grouproles', group.getRoles())" />
    </tal:conditional>

<!-- ugly way of simulating real actions on the groups/user pages until we have
     real objects. -->
<div id="contentTabs"> 
    <a class="" 
       href=""
       tal:attributes="href string:prefs_group_details?groupname=${groupname}"
    >Group</a>
    <a class="selected"         
       href=""
       tal:attributes="href string:${template/id}?groupname=${groupname}"
    >Group Members</a>
</div>
<div id="contentBar">&nbsp;</div>
<!-- End of tabs -->
    
<div class="document editable">    

    <h1 i18n:translate="">Members of the <tal:group content="groupname">Finance</tal:group> Group</h1>

    <p i18n:translate="">
    You can add or remove users from this particular group here. Note that this
    doesn't actually delete the user, it is only removed from this group.
    </p>
    
    <form action=""
          name="groups"
          method="post"
          tal:attributes="action here/absolute_url">


	  <input type="hidden" name="groupname" value="groupname"
               tal:attributes="value group/getGroupName" />

       <input class="standalone add"
              tabindex=""
              type="submit"
              name="prefs_user_group_search_form:method"
              value="Add Users to this Group"
              tal:attributes="tabindex tabindex/next;"
              />

       <input class="quickSearch"
              tabindex=""
              type="text"
              name=""
              value="Quick Search"
              tal:attributes="tabindex tabindex/next;"
              />
               

<!-- start of dead code - should list Groups on top (if any), then individual users.-->
       <table class="listing">
               
            <tr>
                <th>User name</th>
                <th>E-mail Address</th>
                <th>Remove user</th>
            </tr>
            
            <tal:block tal:repeat="this_user group/getGroupMembers">
            <tr tal:define="oddrow repeat/this_user/odd"
                tal:attributes="class python:test(oddrow,'odd','even')">
              <tal:block tal:define="roles python: this_user.getRoles();
                                     username python: this_user.getUserName();
                                     fullname python: this_user.getProperty('fullname')">
                <td>
                    <a tal:attributes="href string:${here/portal_memberdata/absolute_url}/prefs_user_details?userid=$username">
                     <img src=""
                         tal:replace="structure portal/user.gif" />&nbsp;<span 
                         tal:replace="username">username</span>
                    
                    (<span tal:replace="fullname">Full Name</span>)

                    </a>
                </td>
		  <td tal:define="email python: this_user.getProperty('email')">
		    <a href="#" tal:attributes="href string:mailto:${email}">
		      
                <img src=""
                     tal:replace="structure portal/mail_icon.gif" />   
		      <span tal:replace="email" />
                </a>

		    
            </td>

                <td class="checkbox">
                    <input type="checkbox"
                           class="noborder notify"
                           name="delete:list" tal:attributes="value username" />
                </td>
		</tal:block>
            </tr>
	    </tal:block>
        </table>


<!-- end dead code -->

        <input class="destructive"
               type="submit" 
               name="prefs_group_members_edit:method" 
               value="Delete selected users" />

    </form>

</div>
    
</div>

</body>
</html>

