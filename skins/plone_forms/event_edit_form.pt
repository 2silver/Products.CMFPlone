<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master">
<body>

    <div metal:fill-slot="main"
         tal:define="rejection here/rejectAnonymous;
                     errors python:request.get('errors', {});" >

    <h1 i18n:translate="">Edit Event</h1>
    
    <p i18n:translate="">
    Fill in the details of the event you want to add.
    </p>

    <form class="group"
          name="edit_form" 
          action="event_edit" 
          method="post" 
          enctype="multipart/form-data">

    <span class="legend" i18n:translate="">Event Details</span>    
      
        <div class="row" 
             tal:attributes="style python:test(not getattr(here.portal_membership.getAuthenticatedMember(), 'visible_ids', ''),
                                          'visibility:hidden;;position:absolute;;left:0;;top:0', '')"
             tal:define="error_id errors/id | nothing;
	                 id python:request.get('id', here.getId());">
			 
            <div class="label required">
                <span i18n:id="id">ID</span>
            
                <div id="id_help" 
                     i18:id="id_help"
                     class="help" 
                     style="visibility:hidden">
                Enter the ID of the event. This is the part that will show up as part
                of the web address. This should be short, descriptive
                and preferrably not contain spaces, underscores or mixed case. Example:
                "expense-report-2002"
                </div>
            </div>
	    
            <div class="field">
                <input type="text" 
                       name="id" 
                       value="#"
                       size="25" 
                       tal:attributes="value id" 
                       tabindex="1"
                       onfocus="formtooltip('id_help',1)" 
                       onblur="formtooltip('id_help',0)" />
            </div>
	    
        </div>

        <div class="row"
             tal:define="error_title errors/title|nothing;
                         Title request/title | here/Title;"> 

            <div class="label required">
            <span i18n:id="event_title">Event Title</span>
                <div id="title_help" 
                     i18n:id="title_help"
                     class="help" 
                     style="visibility:hidden">
                Enter the title of this event. 
                </div>

            </div>

            <div class="field"
                  tal:attributes="class python:test(error_title, 'field error', 'field')" >

                <div tal:replace="error_title" />

                <input type="text" 
                       name="title" 
                       value="#" 
                       size="30" 
                       tabindex="2"
                       tal:attributes="value Title" 
                       onfocus="formtooltip('title_help',1)" 
                       onblur="formtooltip('title_help',0)" />

            </div>
        </div>

        <div class="row"> 
            <div class="label">
                <span i18n:id="event_location">Event Location</span>
                <div id="event_location_help" 
                     i18n:id="event_location_help"
                     class="help" 
                     style="visibility:hidden">
                Enter the location where the event will take place. 
                </div>
            </div>
            
            <div class="field">
                <input type="text"
                       name="location"
                       size="25"
                       value="location"
                       tabindex="3"
                       tal:attributes="value here/location"
                       onfocus="formtooltip('event_location_help',1)" 
                       onblur="formtooltip('event_location_help',0)" />
            </div>
        </div>
               
        <div class="row"> 
            <div class="label">
                <span i18n:id="event_type">Event Type</span>
                <div id="event_type_help" 
                     i18n:id="event_type_help"
                     class="help" 
                     style="visibility:hidden">
                Select the type of event. Multiple event types possible.
                </div>
            </div>

            <div class="field">
                <select name="event_type:list" 
                        multiple="multiple"
                        tabindex="4"
                        size="6"
                        onfocus="formtooltip('event_type_help',1)" 
                        onblur="formtooltip('event_type_help',0)" 
                        tal:define="contentSubject here/Subject; allowedSubjects python:here.portal_metadata.listAllowedSubjects(here)">
               
                   <option tal:replace="nothing">Event Type 1</option>
                   <option tal:replace="nothing">Event Type 2</option>
                   <option tal:replace="nothing">...</option>
                   <option value="subj"
                           tal:repeat="subj allowedSubjects"
                           tal:attributes="value subj; selected python:subj in contentSubject and 1 or 0"
                           tal:content="subj">Event Type N</option>
               </select>
            </div>
        </div>
               
        <div class="row">
            <div class="label">
                <span i18n:id="event_description">Event Description</span>
                
                <div id="event_description_help" 
                     i18n:id="event_description_help"
                     class="help" 
                     style="visibility:hidden">
                Enter a brief description of the event. 
                </div>
            </div>
            <div class="field" tal:define="description request/description | here/Description "> 
                <textarea cols="40" 
                          rows="5" 
                          tabindex="5"
                          name="description"
                          tal:content="description"
                          onfocus="formtooltip('event_description_help',1)" 
                          onblur="formtooltip('event_description_help',0)">
                Description 
                </textarea>
            </div>
        </div>

        <div class="row"> 
            <div class="label">
                <span i18n:id="event_url">Event URL</span>
                
                <div id="event_url_help" 
                     i18n:id="event_url_help"
                     class="help" 
                     style="visibility:hidden">
                Enter the optional web address of a page containing more info about
                the event. 
                </div>
            </div>
            <div class="field">
                <input type="text" 
                      name="event_url"
                      size="25" 
                      value="event_url"
                      tal:attributes="value here/event_url" 
                      tabindex="6"
                      onfocus="formtooltip('event_url_help',1)" 
                      onblur="formtooltip('event_url_help',0)">

            </div>
        </div>

        <div class="row"
             tal:define="start_date python:request.get('start_date', here.toPortalTime(here.start(), long_format=1));
                         error_start_date errors/start_date | nothing;">
            <div class="label">
              <span i18n:id="start_date">Event Starts</span>
                <div id="start_date_help"
                     i18n:id="start_date_help" 
                     class="help" 
                     style="visibility:hidden">
                     Enter the starting date and time,
                     or click the calendar icon and select it.
                </div>
            </div>
            <div class="field"
                 tal:attributes="class python:test(error_start_date, 'field error', 'field')" >

                <div tal:replace="error_start_date" />

                <div tal:define="inputname  string:start_date; 
                                 formname   string:edit_form;
                                 inputvalue start_date;
                                 onfocus string:formtooltip('start_date_help',1);
                                 onblur string:formtooltip('start_date_help',0);
                                 tabindex string:7;">
                  <div metal:use-macro="here/calendar_support/macros/calendarDatePickerBox">
                    a calendar, hopefully
                  </div>
                </div>
            </div>
        </div>

        <div class="row"
             tal:define="end_date python:request.get('end_date', here.toPortalTime(here.end(), long_format=1));
                         error_end_date errors/end_date | nothing;">
            <div class="label">
              <span i18n:id="end_date">Event Ends</span>
                <div id="end_date_help"
                     i18n:id="end_date_help" 
                     class="help" 
                     style="visibility:hidden">
                     Enter the ending date and time,
                     or click the calendar icon and select it.
                </div>
            </div>
            <div class="field"
                tal:attributes="class python:test(error_end_date, 'field error', 'field')" >
                <div tal:replace="error_end_date" />
                <div tal:define="inputname  string:end_date; 
                                 formname   string:edit_form;
                                 inputvalue end_date;
                                 onfocus string:formtooltip('end_date_help',1);
                                 onblur string:formtooltip('end_date_help',0);
                                 tabindex string:8;">

                  <div metal:use-macro="here/calendar_support/macros/calendarDatePickerBox">
                    a calendar, hopefully
                  </div>
                </div>

            </div>
        </div>

        <div class="row"> 
            <div class="label">
                <span i18n:id="contact_name">Contact Name</span>
                
                <div id="contact_name_help" 
                     i18n:id="contact_name_help"
                     class="help" 
                     style="visibility:hidden">
                Enter a contact person or organization for the event.
                </div>
            
            </div>
            <div class="field">
                <input type="text"
                      name="contact_name" 
                      size="25"
                      value="contact_name"
                      tal:attributes="value here/contact_name"
                      tabindex="9"
                      onfocus="formtooltip('contact_name_help',1)" 
                      onblur="formtooltip('contact_name_help',0)" />
            </div>
        </div>

        <div class="row"> 
            <div class="label">
                <span i18n:id="contact_email">Contact E-mail</span>
                
                <div id="contact_email_help" 
                     i18n:id="contact_email_help"
                     class="help" 
                     style="visibility:hidden">
                Enter an e-mail address to use for information regarding
                the event.
                </div>
            
            </div>
            <div class="field">
                <input type="text"
                      name="contact_email" 
                      size="25"
                      value="contact_email"
                      tal:attributes="value here/contact_email"
                      tabindex="10"
                      onfocus="formtooltip('contact_email_help',1)" 
                      onblur="formtooltip('contact_email_help',0)" />
            </div>
        </div>

        <div class="row"> 
            <div class="label">
                <span i18n:id="contact_phone">Contact Phone</span>
                
                <div id="contact_phone_help" 
                     i18n:id="contact_phone_help"
                     class="help" 
                     style="visibility:hidden">
                Enter the phone number to call for information and/or
                booking.
                </div>
            
            </div>

            <div class="field">
                <input type="text"
                      name="contact_phone"
                      size="25"
                      value="contact_phone"
                      tal:attributes="value here/contact_phone"
                      tabindex="11"
                      onfocus="formtooltip('contact_phone_help',1)" 
                      onblur="formtooltip('contact_phone_help',0)" />

            </div>
        </div>

        <div class="row">
            <div class="label">&nbsp;</div>
            <div class="field" 
            tal:define="process_creation request/process_creation|nothing;"> 
                <input class="context" 
                       tabindex="12"
                       type="submit" 
                       name="Change" 
                       value="Save" />
                <input class="context"
                       tabindex="13" 
                       type="submit" 
                       name="cancel" 
                       value="Cancel" />
            </div>
        </div>
        
    </form>

    </div>

</body>

</html>
