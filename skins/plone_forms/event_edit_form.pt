<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master">
<body>

    <div metal:fill-slot="main"
         tal:define="rejection here/rejectAnonymous;
                     errors python:request.get('errors', {});" >

    <h1>Edit Event</h1>
    
    <p>
    Here you can edit the details of this event.
    </p>

    <form class="group"
          name="edit_form" 
          action="event_edit" 
          method="post" 
          enctype="multipart/form-data">

    <span class="legend">Event Details</span>    
      
        <div class="row" 
             tal:define="error_id errors/id | nothing;
	                 id python:request.get('id', here.getId());
                         id python:test(here.isIDAutoGenerated(id), '', id)">
			 
            <span class="label required">ID</span>
	    
            <span class="field">
	    <input type="text"
	           name="field_id"
		   value="#"
		   tal:attributes="value id" />
	    </span>
	    
            <span class="info">
            Enter the ID of the document. This is the part that shows up in the
            URL pointing to the document. If you dont know what this means,
            just leave it at the supplied value.
            </span>
        </div>

        <div class="row"
             tal:define="error_title errors/title|nothing;
                         Title request/title | here/Title;"> 
            <span class="label required">Event Name</span>
            <span class="field"
                  tal:attributes="class python:test(error_title, 'field error', 'field')" >

                <div tal:condition="error_title"
                      tal:replace="error_title" />

                <input type="text" 
                       name="title" 
                       value="#" 
                       tal:attributes="value Title" />

            </span>
            <span class="info">
            Enter the name of this event. 
            </span>
        </div>

        <div class="row"> 
            <span class="label">Event Location</span>
            <span class="field">
                <input type="text"
                      name="location"
                      size="25"
                      value="location"
                      tal:attributes="value here/location" />
            </span>
            <span class="info">

            </span>
        </div>
               
        <div class="row"> 
            <span class="label">Event type</span>
            <span class="field">
                <select name="event_type:list" multiple
                       tal:define="contentSubject here/Subject; allowedSubjects python:here.portal_metadata.listAllowedSubjects(here)">
               
                   <option tal:replace="nothing">Event Type 1</option>
                   <option tal:replace="nothing">Event Type 2</option>
                   <option tal:replace="nothing">...</option>
                   <option value="subj"
                           tal:repeat="subj allowedSubjects"
                           tal:attributes="value subj; selected python:subj in contentSubject and 1 or 0"
                           tal:content="subj">Event Type N</option>
               </select>
            </span>
            <span class="info">

            </span>
        </div>
               
        <div class="row"> 
            <span class="label">Event Description</span>
            <span class="field">
                <textarea name="description"
                          rows="6" cols="25"
                          tal:content="here/Description">Description</textarea>
            </span>
            <span class="info">

            </span>
        </div>

        <div class="row"> 
            <span class="label">Event URL</span>
            <span class="field">
                <input type="text" 
                      name="event_url"
                      size="25" 
                      value="event_url"
                      tal:attributes="value here/event_url" />
            </span>
            <span class="info">

            </span>
        </div>

        <div class="row"> 
            <span class="label">Event Starts</span>
            <span class="field">
                <span tal:define="startstrings here/getStartStrings">
                    
                    <select name="effectiveYear">
                        <option value=""
                                tal:define="years here/buildYears"
                                tal:repeat="year years"
                                tal:attributes="value year; selected python:year == startstrings['year']"
                                tal:content="year">
                            Year
                        </option>
                    </select>
                    
                    <select name="effectiveMo">
                        <option value=""
                                tal:define="months here/buildMonths"
                                tal:repeat="month months"
                                tal:attributes="value month; selected python:month == startstrings['month']"
                                tal:content="month">
                            Month
                        </option>
                    </select>
                    
                    <select name="effectiveDay">
                        <option value=""
                                tal:define="days here/buildDays" 
                                tal:repeat="day days"
                                tal:attributes="value day; selected python:day == startstrings['day']"
                                tal:content="day">
                            Day
                        </option>
                    </select>
                </span>

                <span tal:define="stTimeString python:modules['string'].split(here.getStartTimeString());
                                  amSel python:(len(stTimeString) == 2 and stTimeString[1] == 'am') and 1 or 0;
                                  pmSel python:(len(stTimeString) == 2 and stTimeString[1] == 'pm') and 1 or 0">
                    <select name="start_time">
                        <option value=""
                                tal:repeat="bt here/buildTimes"
                                tal:attributes="value bt; selected python:bt == stTimeString[0]"
                                tal:content="bt">
                            Start time
                        </option>
                    </select>
                    
                    <input type="radio"
                           name="startAMPM" 
                           value="am"
                           tal:attributes="checked amSel" /> AM
                           
                    <input type="radio"
                           name="startAMPM" 
                           value="pm"
                           tal:attributes="checked pmSel" /> PM
                           
                    <input type="hidden" 
                           name="startAMPM:default" 
                           value="pm" />
                </span>


            </span>
            <span class="info">

            </span>
        </div>

        <div class="row"> 
            <span class="label">Event Ends</span>
            <span class="field">
                <span tal:define="endstrings here/getEndStrings">
                    <select name="expirationYear">
                        <option value=""
                                tal:define="years here/buildYears"
                                tal:repeat="year years"
                                tal:attributes="value year; selected python:year == endstrings['year']"
                                tal:content="year">
                            Day
                        </option>
                    </select>
                    
                    <select name="expirationMo">
                        <option value=""
                                tal:define="months here/buildMonths"
                                tal:repeat="month months"
                                tal:attributes="value month; selected python:month == endstrings['month']"
                                tal:content="month">
                            Month
                        </option>
                    </select>
                    
                    <select name="expirationDay">
                        <option value=""
                                tal:define="days here/buildDays" 
                                tal:repeat="day days"
                                tal:attributes="value day; selected python:day == endstrings['day']"
                                tal:content="day">
                            Day
                        </option>
                    </select>
                </span>

                <span tal:define="stTimeString python:modules['string'].split(here.getStopTimeString());
                                  amSel python:(len(stTimeString) == 2 and stTimeString[1] == 'am') and 1 or 0;
                                  pmSel python:(len(stTimeString) == 2 and stTimeString[1] == 'pm') and 1 or 0">
                    <select name="stop_time">
                        <option value=""
                                tal:repeat="bt here/buildTimes"
                                tal:attributes="value bt; selected python:bt == stTimeString[0]"
                                tal:content="bt">
                            End time
                        </option>
                    </select>
                    
                    <input type="radio"
                           name="stopAMPM" 
                           value="am"
                           tal:attributes="checked amSel" /> AM
                    
                    <input type="radio"
                           name="stopAMPM" 
                           value="pm"
                           tal:attributes="checked pmSel" /> PM

                    <input type="hidden" 
                           name="stopAMPM:default" value="pm" />
                </span>

            </span>
            <span class="info">

            </span>
        </div>

        <div class="row"> 
            <span class="label">Contact Name</span>
            <span class="field">
                <input type="text"
                      name="contact_name" 
                      size="25"
                      value="contact_name"
                      tal:attributes="value here/contact_name" />
            </span>
            <span class="info">
            Here you can add relevant contact information for the event.
            </span>
        </div>

        <div class="row"> 
            <span class="label">Contact Email</span>
            <span class="field">
                <input type="text"
                      name="contact_email" 
                      size="25"
                      value="contact_email"
                      tal:attributes="value here/contact_email" />
            </span>
            <span class="info">

            </span>
        </div>

        <div class="row"> 
            <span class="label">Contact Phone</span>
            <span class="field">
                <input type="text"
                      name="contact_phone"
                      size="25"
                      value="contact_phone"
                      tal:attributes="value here/contact_phone" />
            </span>
            <span class="info">

            </span>
        </div>

        <div class="row">
            <span class="label">&nbsp;</span>
            <span class="field" 
            tal:define="process_creation request/process_creation|nothing;"> 
                <input class="context" type="submit" name="Change" value="Save" />
                <input class="context" type="submit" name="cancel" value="Cancel" />
            </span>
        </div>
        
        <div class="spacer">
        &nbsp;
        </div>
    
    </form>

    </div>

</body>

</html>
