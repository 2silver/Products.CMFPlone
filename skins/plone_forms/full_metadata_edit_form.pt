<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"

"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"

      lang="en-US"

      metal:use-macro="here/content_template/macros/master">

<body>



<div metal:fill-slot="main">

  

    <script language="JavaScript" src="cmf_skin_tools/calendar.js"></script>



    <script language="JavaScript"> 

    function addSelectedKeywords() {

        predefSubjects=document.full_metadata_form.elements[5];

        for (var x=0; x<predefSubjects.length; x++) {

            if (predefSubjects[x].selected) {

                 addNewKeyword(predefSubjects[x].value);

            }

        }

    }



    function addNewKeyword(newWord) {

        selSubjects=document.full_metadata_form.elements[7];

        selSubjects.value+=newWord+'\n'

    }

    </script>



    <h1>Edit information (all data)</h1>



    <p>

    This information, also referred to as <em>metadata</em> is the collection of information that is used to 

    categorize an object, assign effectuation dates and expiration dates, 

    language, and keywords.

    </p>



    <p>

    Change this item's metadata using the form below. Remember, metadata is

    powerful - it enables us to do lots of nifty stuff. So fill in the fields

    as concisely as possible, and leave the ones you don't know blank.

    </p>

    

    <div class="group">

        

        <span class="legend">Item Information</span>

	

    	<div class="row">

			<span class="label">Creation Date</span>

			<span class="field" tal:content="here/CreationDate">2001-08-16 22:09:11</span>

			<span class="info">The date the item was created. Not modifiable.</span>

	    </div>



		<div class="row">

			<span class="label">Last Modified Date</span>

			<span class="field" tal:content="here/ModificationDate">2001-08-16 22:09:16</span>

			<span class="info">The date of the last modification. Automatically updated.</span>

	    </div>

		

    </div>

    



    <form class="group"

          name="edit_form" 

          action="metadata_edit" 

          method="post"

          tal:attributes="action string:${here/getId}/metadata_edit">



        <span class="legend">Item Details</span>

        

		<div class="row">

			<span class="label">Title</span>

			<span class="field"> <input type="text" name="title" value="My Page" size="25" tal:attributes="value here/Title"> </span>

			<span class="info">The title of the item.</span>

	    </div>



		<div class="row">

			<span class="label">Description</span>

			<span class="field">

				<textarea name="description:text" rows="10" cols="34" tal:content="here/Description">Some descriptive text</textarea>

			</span>

			<span class="info">A short description of the item.</span>

	    </div>

      <div class="row">
        <span class="label">Allow Discussion</span>
        
        <span class="field">
         <select name="allowDiscussion"
                 tal:define="val here/isDiscussable">
           <option value="None"
                   tal:attributes="selected python: val == None"> Default </option>
           <option value="0"
                   tal:attributes="selected python: val == 0"> Off </option>
           <option value="1"
                   tal:attributes="selected python: val == 1"> On </option>
         </select>
        </span>
            
  	    <span class="field"> 
        </span>
    </div>



	    <div class="row">

            <span class="label">Keywords</span>

	        <span class="field" 

                  tal:define="global contentSubjects here/Subject;

                              global allowedSubjects python:container.portal_metadata.listAllowedSubjects(here);

                              global previousSubjects python:container.portal_catalog.uniqueValuesFor('Subject');">

           

                <table>

                    <tr><td>

                    New keyword <br />

                    

                    <input type="text" name="entered_keyword" value="" size="20"> 

                    <input class="context" type="submit" name="add" value="Add &gt;"

                           onclick="javascript:addNewKeyword(document.edit_form.entered_keyword.value);return false;">

        

                    <br />            

                    Existing keywords

                    <br />

                        <select name="predefined_subjects" size="7" multiple="multiple" >

                        <option value="#" tal:repeat="subject python:allowedSubjects+previousSubjects"

                                tal:content="subject" tal:attributes="value subject"> # </option>                                

                        </select>

                    

                        <input class="context" type="submit" name="add" value="Add &gt;"

                               onclick="javascript:addSelectedKeywords();return false;">

                    </td>

                    <td>

                    

                    Selected keywords<br />

                    <textarea name="subject:lines" rows="10" cols="10" wrap="OFF"><span tal:repeat="subject here/Subject" tal:replace="python:str(subject)+'\n'"/></textarea>&nbsp;

                    

                    </td></tr>

                </table>

                

            </span>



            <span class="info">

            Here you add the relevant keywords that describes this item. You can either 

            add new ones, or use some of the existing ones. We recommend using the existing

            keywords if possible, try to avoid adding new keywords that are essentially the 

            same as the existing ones.

            <br />

            Each keyword must be on a separate line in the "selected keywords" textbox.

            <br />

            Existing Keywords can be easily changed, but currently is all subjects 

            that have ever been used in the system.

            </span>

        

        </div>         







		<div class="row">

			<span class="label">Contributors</span>

			<span class="field">

				<textarea name="contributors:lines" rows="5" cols="34" ><p tal:repeat="contributor here/Contributors" tal:replace="python:contributor+'\n'">contributor</p></textarea>

			</span>

			<span class="info">The names of people that have contributed to this item.</span>

	    </div>



		<div class="row">

			<span class="label">Effective Date</span>

			<span class="field">

				<input type="text" name="effective_date" size="25" value="None" tal:attributes="value here/EffectiveDate"> 

				<a href="javascript:doNothing()" onclick="setDateField(document.edit_form.effective_date);top.newWin = window.open('cmf_skin_tools/calendar.html','cal','dependent=yes,width=310,height=230,screenX=200,screenY=300,titlebar=yes')">

				<img src="popup_calendar.gif">

				</a>

			</span>

			<span class="info">

			The date when the document will be visible when it's published. This way, you can 

			publish a document in advance, but it will not be visible before this date.

			</span>

	    </div>



		<div class="row">

			<span class="label">Expiration Date</span>

			<span class="field"><input type="text" name="expiration_date" size="25" value="2000-12-31 00:00:00" tal:attributes="value here/ExpirationDate">

				<a href="javascript:doNothing()" onclick="setDateField(document.edit_form.expiration_date);top.newWin = window.open('cmf_skin_tools/calendar.html','cal','dependent=yes,width=310,height=230,screenX=200,screenY=300,titlebar=yes')">

				<img src="popup_calendar.gif">

				</a>

			</span>

			<span class="info">

			The date when the document expires. This will automatically make the document

			invisible for others at the given date.

			</span>

	    </div>



		

		<div class="row">

			<span class="label">Format</span>

			<span class="field"><input type="text" name="format" size="25" value="text/html" tal:attributes="value here/Format"> [pop-up?]</span>

			<span class="info">

			The MIME-type of the document. If you don't know what this does, just leave it :)

			</span>

	    </div>



		<div class="row">

			<span class="label">Language</span>

			<span class="field"><input type="text" name="language" size="25" value="" tal:attributes="value here/Language"> [pop-up?]</span>

			<span class="info">

			This is the language the document is written in.

			</span>

	    </div> 	

					  

		<div class="row">

			<span class="label">Rights</span>

			<span class="field"><input type="text" name="rights" size="25" value="" tal:attributes="value here/Rights"></span>

			<span class="info">Copyright information on the item.</span>

	    </div>



	

        <div class="row">

            <span class="label">&nbsp;</span>

            <span class="field">

               <input class="context" type="submit" name="change_and_view" value="Save">

            </span>

        </div>	

    

    </form>

		

</div>



</body>

</html>

