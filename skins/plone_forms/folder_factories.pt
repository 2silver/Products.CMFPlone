<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master">

<body>

<div metal:fill-slot="main"
     tal:define="Iterator python:modules['Products.CMFPlone'].IndexIterator;
                 tabindex python:Iterator();"
     tal:condition="here/rejectAnonymous" >

     <metal:block tal:condition="python:test(request.get('type_name', 'Select')!='Select', 1, 0)">
        <tal:block tal:define="pps python:modules['Products.PythonScripts.standard'];
                               type_name python:pps.url_quote(request.get('type_name'));
                               creation_url string:${here/absolute_url}/createObject?type_name=$type_name;
                               dummy python:request.response.redirect(creation_url);" />
     </metal:block>
     
	<h1 i18n:translate="">Add new item</h1>
	
	<p i18n:translate="">
	Select the type of item you want to add to your folder.
	</p>

  <div class="group" metal:define-macro="addlist"
       tal:define="filterOut python:['Favorite'];
                   create_id id | nothing;
                   id_query string:&amp;id=$create_id;
                   query python:test(create_id, id_query, '');">
    
      <span class="legend" i18n:translate="">Items Available</span>
        
      <div tal:repeat="ctype here/allowedContentTypes"> 

          <div class="row" tal:define="Title ctype/Title;Id ctype/getId"
                           tal:condition="python:test(Id not in filterOut, 1, 0)">
    	
              <div class="label">
                  <span for="#" tal:attributes="for string:cb_${repeat/ctype/number}" tal:replace="Title">
                        Title
                  </span>
                  <a href="#" tal:attributes="href string:createObject?type_name=$Id">
                      <img src="folder.gif" alt="" width="16" height="16" tal:attributes="src string:$portal_url/${ctype/getIcon}" />
                  </a>
              </div>
    	
              <div class="field">
                  <form name="quickAdd" action="createObject" method="post">
        				      <input name="type_name" 
                             type="hidden" 
                             value="" 
                             tal:attributes="value Id">
        				      <input name="id" 
                             type="hidden" 
                             value="" 
                             tal:attributes="value create_id" 
                             tal:condition="create_id"
                             />
                      <input class="standalone" 
                             type="submit" 
                             value="Add" 
                             tabindex=""
                             tal:attributes="tabindex tabindex/next;"
                             />
                      <br />
                      <p tal:content="ctype/Description">
                        Item description
                      </p>
                  </form>
              </div>
    		 
          </div>
      </div>
        
  </div>

</div>
	   
</body>
</html>
