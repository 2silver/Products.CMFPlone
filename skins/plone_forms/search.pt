<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master">
<body>

<div metal:fill-slot="main"
       tal:define="results python:here.queryCatalog();
                 Batch python:modules['ZTUtils'].Batch;
                 DateTime python:modules['DateTime'].DateTime;
                 b_size python:30;b_start python:0;b_start request/b_start | b_start;">
    
    <h1 i18n:translate="">Search results</h1>
                 
    <div tal:condition="results"
          tal:define="batch python:Batch(results, b_size, int(b_start), orphan=1);
                      mq python:modules['ZTUtils'].make_query;
                      mhi python:modules['ZTUtils'].make_hidden_input">

        <strong> 
        <span tal:replace="python:len(results)" /> 
        <span i18n:translate="">items matching your criteria</span>. 
        </strong> 
        
        <br/>
        
        <!-- Navigation -->
        <div class="listingBar" tal:condition="python:test(batch.previous or batch.next, 1, 0)">
            <span class="previous" 
              tal:define="p batch/previous | nothing" 
              tal:condition="p"> 
                <a href=""
                   tal:attributes="href python: '?' + mq( request.form, b_start=p.first )">
                   &laquo; Previous <span tal:replace="p/length">n</span> items
                </a>
            </span>
                
            <span class="next" 
              tal:define="n batch/next | nothing" 
              tal:condition="n">
                <a href=""
                   tal:attributes="href python: '?' + mq( request.form, b_start=n.first )">
                   Next <span tal:replace="n/length">n</span> items &raquo;
                </a>
            </span> 
        </div>

        <!-- Search results -->
        
        <table class="listing"
               id="sortable"
               tal:condition="here/contentValues">
        
            <thead>
                <tr>
                    <th i18n:id="title">Title</th>
                    <th i18n:id="author">Author</th>
                    <th i18n:id="last_modified">Last Modified</th>
                    <th i18n:id="description">Description</th>
                </tr>
            </thead>

            <tbody>
	        <metal:block tal:repeat="result batch">
                <tr class="even" 
		            tal:define="oddrow repeat/result/odd;
                                result_url result/getURL;
                                url string:$result_url/view;" 
		            tal:attributes="class python:test(oddrow, 'even', 'odd')" >
                    <td>
		         <a href="#" 
			    tal:attributes="href url"><img src="#" tal:attributes="src result/getIcon; alt result/Type;" border="0" /></a>&nbsp;<a 
                         href="#" tal:attributes="href url"
                                  tal:content="result/Title" />
                    </td>
                    <td tal:content="result/Creator">Author </td>
                    <td tal:content="result/ModificationDate">Modification Date</td>
                    <td tal:content="result/Description"> Description </td>
                </tr>
		</metal:block>
            </tbody>
        </table>

        <!-- Navigation -->
        <div class="listingBar" tal:condition="python:test(batch.previous or batch.next, 1, 0)">
            <span class="previous" 
              tal:define="p batch/previous | nothing" 
              tal:condition="p"> 
                <a href=""
                   tal:attributes="href python: '?' + mq( request.form, b_start=p.first )">
                   &laquo; Previous <span tal:replace="p/length">n</span> items
                </a>
            </span>
                
            <span class="next" 
              tal:define="n batch/next | nothing" 
              tal:condition="n">
                <a href=""
                   tal:attributes="href python: '?' + mq( request.form, b_start=n.first )">
                   Next <span tal:replace="n/length">n</span> items &raquo;
                </a>
            </span> 
        </div>

    </div>
    
    <div tal:condition="not: results">
        <p><strong i18n:translate=""> No Results were Found </strong></p>
    </div>		 

</div>


</body>
</html>

