<!-- presents a directory like listing of apache -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master">

<head>
  <metal:block metal:fill-slot="javascript_head_slot">
    <script type="text/javascript" tal:attributes="src here/table_sort.js/absolute_url"></script>
    <script type="text/javascript" tal:attributes="src here/folder_actions.js/absolute_url"></script>
  </metal:block>
</head>

<body>
<div metal:fill-slot="super">

    <div metal:use-macro="here/portal_tabs/macros/folderTabs">
    Content tabs
    </div>

    <div class="contentBar">
    &nbsp;
    </div>

</div>


    <div metal:fill-slot="main">

        <div class="contentHeader">
        <h1 tal:content="here/title_or_id">Title or id</h1>
        </div>

        <div class="description"
             tal:content="structure here/Description"> description </div>

        <div tal:condition="python:not getattr(here.aq_explicit, 'index_html', None) and
                           here.portal_membership.checkPermission('Add portal content', here)">
          This folder does not have a default page, therefore a list of items
          is shown instead.
          <a href="#" tal:attributes="href string:${here/absolute_url}/invokeFactory?id=index_html&type_name=Document">Click here</a>
          if you want to create a default page in this folder that will
          replace the item listing. 
        </div>

        <p>
            <a href="" 
               tal:define="parent_url python:here.navigationParent(here, template.getId());"
               tal:attributes="href parent_url">
            Up one level
            </a>
        </p>
       
        <table class="listing"
	       id="sortable"
               tal:condition="here/contentValues">
        
            <thead>
                <tr>
                    <th>Title&nbsp;<img src="arrowUp.gif" alt="Sort" height="6" width="9" /></th>
                    <th>Type</th>
                    <th>Size</th>
                    <th>Last Modified</th>
                    <th>Description</th>
                </tr>
            </thead>

            <tbody>
	        <metal:block tal:repeat="obj python:here.listFolderContents()">
                <tr class="even" 
		    tal:define="oddrow repeat/obj/odd" 
		    tal:attributes="class python:test(oddrow, 'even', 'odd')" >
                    <td>
		        <img src="#" tal:attributes="src string:${here/portal_url}/${obj/getIcon}" />
			<a href="#" tal:attributes="href string:${obj/absolute_url}/view"
                           tal:content="obj/title_or_id" />
                    </td>   
                    <td tal:content="obj/Type">Type</td>
                    <td tal:content="python:test(hasattr(obj, 'get_size'), here.getObjSize(obj), 'n/a')">Size</td>
                    <td tal:content="python:here.toPortalTime(obj.ModificationDate())">Modification Date</td>
                    <td tal:content="structure python:test(obj.Description(), obj.Description(), 'n/a')"> description </td>
                </tr>
		</metal:block>
            </tbody>
        </table>

        <div tal:condition="not: here/contentValues">
         <p>There are currently no items in this folder.</p>
        </div>        

    </div>

</body>
</html>
