<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master">
<body>

   <div metal:fill-slot="main" 
        tal:define="rejection here/rejectAnonymous;
	            errors python:request.get('errors', {});">

    <h1>Edit Document</h1>
    
    <p>
    Here you can edit the details of this document.
    </p>  

    <form class="group"
          name="edit_form"
          action="document_edit" 
          method="post" 
          enctype="multipart/form-data" >

        <span class="legend">Document Details</span>    
      
        <div class="row" 
             tal:define="error_id errors/id | nothing;
                         id python:request.get('id', here.getId());
			 id python:test(here.isIDAutoGenerated(id), '', id)"> 
            <span class="label required">ID</span>
            <span class="field"
                  tal:attributes="class python:test(error_id, 'field error', 'field')" >

                <div tal:condition="error_id"
                      tal:replace="error_id" />

                <input type="text" 
                       name="field_id" 
                       value="#"
                       size="25" 
                       tal:attributes="value id" />
            </span>
            <span class="info">
            Enter the ID of the document. This is the part that will show up as part
            of the web address. This should be short, descriptive
            and preferrably not contain spaces, underscores or mixed case. Example:
            "expense-report-2002"
            </span>
        </div>
      
        <div class="row"
             tal:define="error_title errors/title|nothing;
                         Title request/title | here/Title;"> 
            <span class="label required">Title</span>
            <span class="field"
                  tal:attributes="class python:test(error_title, 'field error', 'field')" >

                <div tal:condition="error_title"
                      tal:replace="error_title" />

                <input type="text" 
                       name="field_title" 
                       value="#" 
                       size="25" 
                       tal:attributes="value Title" />

            </span>
            <span class="info">
            Enter the title of the document. 
            </span>
        </div>

        <div class="row">
            <span class="label">Summary</span>
            <span class="field" tal:define="description request/description | here/Description "> 
                <textarea cols="25" 
                          rows="5" 
                          name="field_description"
                          tal:content="description">
                Description 
                </textarea>
            </span>
            <span class="info">Enter a brief summary of the document.</span>
        </div>
      
	    <div class="row"> 
            <span class="label"> Body text </span>
            <span class="field" tal:define="text python:request.get('text', here.text)">
                <textarea name="field_text:text" 
                          rows="20" 
                          cols="25" 
                          tal:content="text">Document text</textarea>
            </span>
            <span class="info">The body text of the document.</span>
        </div>

	    <div class="row">
            <span class="label">Format</span>
  	        <span class="field">
                <input class="noborder" type="radio" name="text_format"
                       value="structured-text" id="cb_structuredtext"
                       tal:attributes="checked python:test(here.text_format=='structured-text', 1, 0)" />
                <label for="cb_structuredtext">Structured Text</label> <br />	
                <input class="noborder" type="radio" name="text_format" value="html" id="cb_html"
                       tal:attributes="checked python:test(here.text_format=='html', 1, 0)" />						 
		        <label for="cb_html">HTML</label>
		    </span>
            <span class="info"> 
            Select which format you want to type the contents of this
            document in. If you are unsure of which format to use, just
            select Structured Text and type the document as you usually
            do.
            </span>
	    </div>

	    <div class="row"
	         tal:define="error_file errors/file|nothing;"> 
            
            <span class="label">Upload contents (optional)</span>
            
            <span class="field"
	          tal:attributes="class python:test(error_file, 'field error', 'field')">
                  <div tal:condition="error_file"
                       tal:replace="error_file" />
                  <input type="file" name="file" size="10" />
            </span>
            
            <span class="info">
            This feature can be used if you already have the document 
            in an existing file on your computer and want to add the contents
            of it to this document.
            
            <br />&nbsp;<br />
            
            <strong>Please note that this takes precedence over the 
            body text entered above, and all content in the field above
            will be replaced with the contents of the file supplied here.
            </strong>
            </span>
        
        </div>
    
    
        <div class="row">
            <span class="label"></span>
            <span class="field" tal:define="process_creation request/process_creation|nothing;"> 
                <input class="context" type="submit" name="Change" value="Save" /> 
                <input class="context" type="submit" name="cancel" value="Cancel" />
            </span>
            <span class="info"></span>
	    </div>

    </form>
    
</div>
	   
</body>
</html>
