<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master">

<tal:block metal:fill-slot="base">
   <tal:block tal:define="dummy python:request.set('disable_border',1)" />
</tal:block>

<body>

<div metal:fill-slot="main"
     tal:define="errors python:request.get('errors', {});
                 Iterator python:modules['Products.CMFPlone'].IndexIterator;
                 tabindex python:Iterator();"
     tal:condition="here/rejectAnonymous" >
	
    <h1 i18n:translate="">Plone Setup</h1>
    
    <p i18n:translate="">
    Here you configure some of the settings that affect Plone.
    </p>
    
    <form class="group"
          action="" 
          name="reconfig" 
          method="post" 
          tal:attributes="action here/absolute_url"
          tal:define="props python:container.portal_properties">

        <span class="legend" i18n:translate="">Plone Details</span>
		
        <div class="row"
             tal:define="email_from_name request/email_from_name|props/email_from_name;
                         error_email_from_name errors/email_from_name | nothing;">
            <div class="label">
                <span i18n:id="portal_from_name">Portal 'From' name</span>

                <div id="portal_from_name_help"
                     i18n:id="portal_from_name_help" 
                     class="help" 
                     style="visibility:hidden">
                When Plone generates mail, it uses this name
                as its (apparent) sender.
                </div>
            </div>
            
            <div class="field">                
              
                <div tal:condition="error_email_from_name"
                     tal:replace="structure string:$error_email_from_name <br />" />
                
                <input name="email_from_name"
                       size="30"
                       value=""
                       tabindex="1"
                       onfocus="formtooltip('portal_from_name_help',1)" 
                       onblur="formtooltip('portal_from_name_help',0)" 
                       tal:attributes="value email_from_name;
                                       tabindex tabindex/next;" />
            </div>
        </div>
		
        <div class="row"
             tal:define="email_from_address request/email_from_address|props/email_from_address;
                         error_email_from_address errors/email_from_address | nothing;">
            <div class="label">
                <span i18n:id="portal_from_address">Portal 'From' address</span>

                <div id="portal_from_address_help"
                     i18n:id="portal_from_address_help" 
                     class="help" 
                     style="visibility:hidden">
                When Plone generates mail, it uses this address
                as its (apparent) return address.
                </div>
            </div>
            
            <div class="field">
            
                <div tal:condition="error_email_from_address"
                     tal:replace="structure string:$error_email_from_address <br />" />
                                 
                <input name="email_from_address"
                       size="30"
                       value=""
                       tabindex="2"
                       onfocus="formtooltip('portal_from_address_help',1)" 
                       onblur="formtooltip('portal_from_address_help',0)" 
                       tal:attributes="value email_from_address;
                                       tabindex tabindex/next;" />
            </div>
        </div>
		
        <div class="row"
             tal:define="smtp_server request/smtp_server | props/smtp_server;
                         error_smtp_server errors/smtp_servers | nothing;">
            <div class="label">
                <span i18n:id="smtp_server">SMTP server</span>

                <div id="smtp_server_help"
                     i18n:id="smtp_server_help" 
                     class="help" 
                     style="visibility:hidden">
                This is the address of your local SMTP (out-going
                mail) server. Usually "localhost", unless you use an
                external server to send mail.
                </div>
            </div>
            
            <div class="field">
            
                <div tal:condition="error_smtp_server"
                     tal:replace="structure string:$error_smtp_server <br />" />
                                                 
                <input name="smtp_server" 
                       value=""
                       size="30"
                       tabindex="3"
                       onfocus="formtooltip('smtp_server_help',1)" 
                       onblur="formtooltip('smtp_server_help',0)" 
                       tal:attributes="value smtp_server; 
                                       tabindex tabindex/next;" />
            </div>
        </div>

        <div class="row" 
             tal:define="title request/title | props/title;
                         error_title errors/title | nothing;">
                         
            <div class="label required">
                <span i18n:id="portal_title">Portal title</span>

                <div id="portal_title_help"
                     i18n:id="portal_title_help" 
                     class="help" 
                     style="visibility:hidden">
                This is the title of your Plone instance.
                </div>
            </div>
            
            <div class="field"
                 tal:attributes="class python:test(error_title, 'field error', 'field')">
            
                <div tal:condition="error_title"
                     tal:replace="structure string:$error_title <br />" />

                <input name="title" 
                       size="30"
                       value=""
                       tabindex="4"
                       onfocus="formtooltip('portal_title_help',1)" 
                       onblur="formtooltip('portal_title_help',0)" 
                       tal:attributes="value title;
                                       tabindex tabindex/next;" />
            </div>
        </div>

        <div class="row"
             tal:define="description request/description | props/description;
                         error_description errors/description | nothing;">
            <div class="label">
                <span i18n:id="portal_description">Portal description</span>

                <div id="portal_description_help"
                     i18n:id="portal_description_help" 
                     class="help" 
                     style="visibility:hidden">
                This description is made available via syndicated
                content and elsewhere.  It should be fairly brief.
                </div>
            </div>
            
            <div class="field">
                <textarea cols="30" 
                          rows="6" 
                          name="description"
                          tabindex="5"
                          onfocus="formtooltip('portal_description_help',1)" 
                          onblur="formtooltip('portal_description_help',0)" 
                          tal:attributes="tabindex tabindex/next"
                          tal:content="description">Description</textarea>
            </div>
        </div>

        <div class="row">
            <div class="label">
               <span i18n:id="language_help">Default Language</span>
               <div id="language_help"
                    i18n:id="language_help"
                    class="help"
                    style="visibility:hidden">
               Specify the default language used in properties. 
               </div>
            </div>
            <div class="field">
            <!-- ISO-639-2 language selector for Plone -->
            <select name="language"
                    tabindex="6"
                    value=""
                    onfocus="formtooltip('language_help',1)"
                    onblur="formtooltip('language_help',0)"
                    tal:attributes="value here/portal_properties/default_language;
                                    tabindex tabindex/next;">
               <option value="">Choose Language</option>
               <option tal:repeat="language here/availableLanguages"
                       tal:attributes="value python:language[0];
                                       selected python:test(here.portal_properties.default_language == language[0], 'selected', '')"
                       tal:content="structure python:language[1]" />
            </select>
        </div> 
                
        <div class="row">
            <div class="label">
                <span i18n:id="password_policy">Password policy</span>

                <div id="password_policy_help"
                     i18n:id="password_policy_help" 
                     class="help" 
                     style="visibility:hidden">
                Selects if the users can choose their initial password or not. It's easier
                to create bogus accounts if the password is not generated, so if this is a concern, 
                choose "Generate".
                </div>
            </div>
            
            <div class="field">
                <span tal:define="validateChecked python:props.validate_email;
                                  allowEnterChecked python:not props.validate_email;">
                
                    <input class="noborder" 
                           type="radio" 
                           name="validate_email:int"
                           id="validate_email_on" 
                           value="1"
                           tabindex="6"
                           onfocus="formtooltip('password_policy_help',1)" 
                           onblur="formtooltip('password_policy_help',0)" 
                           tal:attributes="checked validateChecked;
                                           tabindex tabindex/next;" />
                    
                    <label for="validate_email_on" i18n:translate="">Generate and email members' initial password</label> 
                
                    <br />
                
                    <input class="noborder" 
                           type="radio" 
                           name="validate_email:int"
                           id="validate_email_off"
                           value="0"
                           tabindex="6"
                           onfocus="formtooltip('password_policy_help',1)" 
                           onblur="formtooltip('password_policy_help',0)" 
                           tal:attributes="checked allowEnterChecked;
                                           tabindex tabindex/next;" />
                
                    <label for="validate_email_off">Allow members to select their initial password</label>
                
                </span>
            </div>
        </div>

        <div class="row">
            <div class="label">&nbsp;</div>
            <div class="field">
                <input class="context"
                       tabindex="7" 
                       type="submit" 
                       name="reconfig:method" 
                       value="Save settings" 
                       />
            </div>
        </div>

    </form>
    <span tal:replace="structure request" />
</div>

</body>
</html>

