<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">

<metal:block fill-slot="top_slot"
             tal:define="dummy python:request.set('disable_border',1)" />

  <body>

    <div metal:fill-slot="main">

      <h1 i18n:translate="heading_select_default_page">Select default page</h1>

      <div class="documentDescription" i18n:translate="description_select_default_page">
        Please select item which will be displayed as the default page of the
        folder.
      </div>


      <form name="default_page_form"
            action="."
            method="post"
            tal:attributes="action string:${here/absolute_url}/${template/getId}">

        <input type="hidden" name="form.submitted" value="1"/>

        <dl tal:define="blacklistedTypes     here/portal_properties/site_properties/non_default_page_types;
                        itool                portal/portal_interface;
                        defaultPageInterface string:Products.ATContentTypes.interfaces.ISelectableDefaultPage">
            <tal:item repeat="item here/folderlistingFolderContents">
                <tal:filter condition="python:item.portal_type not in blacklistedTypes and
                                              not itool.objectImplements(item, defaultPageInterface)">
                    <dt tal:define="icon python:item.getIcon(1)">
                        <input type="radio" name="objectId" value="" 
                            tal:attributes="value item/getId"/> 
                        <img src="" alt=""
                            tal:attributes="src string:${utool}/${icon};
                                            alt here/title_or_id" />
                        <span tal:replace="item/Title"/>
                    </dt>
                    <dd>
                        <span tal:replace="item/Description"/>
                    </dd>
                </tal:filter>
            </tal:item>
        </dl>

          <div class="formControls">
            <input class="context"
                   tabindex=""
                   type="submit"
                   name="form.button.Save"
                   value="Save"
                   i18n:attributes="value"
                   tal:attributes="tabindex tabindex/next;"
                   />
            <input class="context"
                   tabindex=""
                   type="submit"
                   name="form.button.Cancel"
                   value="Cancel"
                   i18n:attributes="value"
                   tal:attributes="tabindex tabindex/next;"
                   />
          </div>


      </form>

    </div>

  </body>
</html>
