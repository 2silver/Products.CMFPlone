<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/prefs_main_template/macros/master"
      i18n:domain="plone">

<metal:block fill-slot="top_slot"
             tal:define="dummy python:request.set('disable_border',1)" />

<body>

   <div metal:fill-slot="prefs_configlet_main"
      tal:define="controlPanel python:modules['Products.CMFCore.utils'].getToolByName(here, 'portal_controlpanel');
                  groups python:controlPanel.getGroups('site');
                  getIconFor nocall:putils/getIconFor">

    <h1 i18n:translate="heading_control_panel">Site Setup</h1>

    <div class="documentDescription" i18n:translate="description_control_panel">
      Configuration area for Plone and add-on Products.
    </div>              
                        
    <tal:block tal:repeat="group groups">
                        
        <h2 tal:content="group/title"
            i18n:translate="">Plone Configlet Group Title</h2>
                        
        <ul class="configlets" tal:define="configlets python:controlPanel.enumConfiglets(group=group['id'])">
                        
            <tal:configlet repeat="configlet configlets">
                <li tal:condition="configlet/visible">
                    <a href=""          
                       tal:attributes="href configlet/url">
                        <img src="" alt="" tal:attributes="src python:getIconFor('controlpanel',configlet['id']);
                                                           alt configlet/name;"
                             i18n:attributes="alt"
                             tal:on-error="string:" />
                    <tal:configletname tal:content="configlet/name"
                                       i18n:translate=""></tal:configletname>
                    </a>                
                </li>                   
            </tal:configlet>            
                                        
            <li tal:condition="not:configlets" i18n:translate="label_no_panels_available">
                No Preference Panels available.
            </li>                       
                                        
        </ul>                           

    </tal:block>                        

    <tal:versions define="sys here/getZopeInfo;
                          mt here/portal_migration;
                          pil mt/getPILVersion">
        <p class="discreet">
            <strong i18n:translate="heading_plone_version_overview">Plone version overview</strong><br />
            Plone <span tal:replace="mt/getInstanceVersion" />, <br />
            Zope <span tal:replace="python:sys[0]" />, <br />
            Python <span tal:replace="python:sys[1]" />, <br />
            <tal:pil condition="pil">
            PIL <span tal:replace="pil" />
            </tal:pil>
        </p>

        <p class="portalMessage"
           tal:condition="not:pil"
           i18n:translate="text_no_pil_installed">
        Warning: PIL is not installed properly, image scaling will not work.
        </p>
    </tal:versions>
    
    <tal:debugmode define="QI python:context.portal_url.getPortalObject().portal_quickinstaller">
        <p tal:condition="QI/isDevelopmentMode" 
           class="discreet"
           i18n:translate="description_production_mode">
          You are running in "production mode". This means that some 
          configuration changes will not take effect until your server is 
          restarted or a product refreshed. If this is a development instance,
          and you want to enable debug mode, edit your zope.conf file to say
          'debug-mode on'.
        </p>

        <p tal:condition="not: QI/isDevelopmentMode"
           class="discreet"
           i18n:translate="description_debug_mode">
          Note: You are running in "debug mode". This mode is intended for
          sites that are under development. This allows many configuration
          changes to be immediately evident, but will make your site run 
          more slowly. To turn off debug mode, edit your zope.conf file to
          say 'debug-mode off'.
        </p>
    </tal:debugmode>

    </div>

</body>
</html>
