<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/prefs_main_template/macros/master"
      i18n:domain="plone">

<metal:block metal:fill-slot="top_slot"
             tal:define="dummy python:request.set('disable_border',1)" />

<body>

<div metal:fill-slot="prefs_configlet_main"
     tal:define="errors options/state/getErrors;">

    <h1 i18n:translate="heading_mail_setup">Mail Setup</h1>

    <a href=""
       class="link-parent"
       tal:attributes="href string: $portal_url/plone_control_panel"
       i18n:translate="label_up_to_plone_setup">
    Up to Site Setup
    </a>

    <p i18n:translate="description_mail_setup">
        Mail setup for Plone.
    </p>

    <form action=""
          name="mailhost"
          method="post"
          class="enableUnloadProtection"
          tal:attributes="action string:${here_url}/${template_id}"
          tal:define="props python:portal_properties;">

        <fieldset>
            <legend i18n:translate="legend_mailhost_details">Outgoing Mail Server (SMTP) Details</legend>
    
            <div class="field"
                 tal:define="smtp_server request/smtp_server | site_properties/smtp_server;
                             error errors/smtp_servers | nothing;"
                 tal:attributes="class python:test(error, 'field error', 'field')">
    
                <label i18n:translate="label_smtp_server">SMTP server</label>
    
                <div class="formHelp" id="smtp_server_help"
                     i18n:translate="help_smtp_server">
                The address of your local SMTP (outgoing
                e-mail) server. Usually "localhost", unless you use an
                external server to send e-mail.
                </div>
    
                <div tal:content="error">Validation error output</div>
    
                <input name="smtp_server"
                       value=""
                       size="30"
                       tabindex=""
                       tal:attributes="value smtp_server;
                                       tabindex tabindex/next;" />
            </div>
    
            <div class="field"
                 tal:define="smtp_port request/smtp_port | here/MailHost/smtp_port;
                             error errors/smtp_ports | nothing;"
                 tal:attributes="class python:test(error, 'field error', 'field')">
    
                <label i18n:translate="label_smtp_port">SMTP port</label>

                <div class="formHelp" i18n:translate="help_smtp_port">
                The port of your local SMTP (outgoing
                e-mail) server. Usually "25".
                </div>

                <div tal:content="error">Validation error output</div>

                <input name="smtp_port"
                       value=""
                       size="30"
                       tabindex=""
                       tal:attributes="value smtp_port;
                                       tabindex tabindex/next;" />
            </div>
    
            <div class="field"
                 tal:define="smtp_userid request/smtp_userid | here/MailHost/smtp_userid | here/MailHost/smtp_uid | nothing;
                             error errors/smtp_userid | nothing;"
                 tal:attributes="class python:test(error, 'field error', 'field')"
                 tal:condition="python: hasattr(here.MailHost, 'smtp_userid') or hasattr(here.MailHost, 'smtp_uid')">
    
                <label i18n:translate="label_smtp_userid">ESMTP username</label>

                <div class="formHelp" i18n:translate="help_smtp_userid">
                Username for authentication to your e-mail server.
                Not required unless you are using ESMTP.
                </div>

                <div tal:content="error">Validation error output</div>

                <input name="smtp_userid"
                       value=""
                       size="30"
                       tabindex=""
                       tal:attributes="value smtp_userid;
                                       tabindex tabindex/next;" />
            </div>
            <div class="field"
                 tal:define="smtp_pass request/smtp_pass | here/MailHost/smtp_pass | here/MailHost/smtp_pwd | nothing;
                             error errors/smtp_pass | nothing;"
                 tal:attributes="class python:test(error, 'field error', 'field')"
                 tal:condition="python: hasattr(here.MailHost, 'smtp_pass') or hasattr(here.MailHost, 'smtp_pwd')">
    
                <label i18n:translate="label_smtp_pass">ESMTP password</label>

                <div class="formHelp" i18n:translate="help_smtp_pass">
                The password for the ESMTP user account.
                </div>

                <div tal:content="error">Validation error output</div>

                <input name="smtp_pass"
                       value=""
                       size="30"
                       tabindex=""
                       type="password"
                       tal:attributes="value smtp_pass;
                                       tabindex tabindex/next;" />
            </div>
    
            <div class="formControls">
                <input class="context"
                       tabindex=""
                       type="submit"
                       name="form.button.Save"
                       value="Save"
                       i18n:attributes="value label_save;"
                       tal:attributes="tabindex tabindex/next;"
                       />
            </div>
    
        </fieldset>

        <input type="hidden" name="form.submitted" value="1" />

    </form>

</div>

</body>
</html>


