<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/prefs_main_template/macros/master">

<tal:block metal:fill-slot="head_slot">
   <tal:block tal:define="dummy python:request.set('disable_border',1)" />
</tal:block>

<body>


<div metal:fill-slot="prefs_configlet_main" i18n:domain="plone" tal:define="QI python:here.portal_url.getPortalObject().portal_quickinstaller">
    <h2 i18n:translate="heading_install_products_available"> Products available for install </h2>
    <form action="installProducts" tal:attributes="action python:QI.absolute_url()+'/installProducts'" method="POST">

        <table>
            <tr tal:repeat="product QI/listInstallableProducts">
                <td><input class="noborder"
                           type="checkbox"
                           name="products:list"
                           tal:attributes="value product/id"
                           /></td>
                <td tal:content="product/id">product name</td>
    <td tal:define="pid product/id" tal:condition="python:container.portal_quickinstaller.getProductFile(pid)">  
                    (<a tal:attributes="href string:${QI/absolute_url}/prefs_install_product_readme?filereadme=${product/id}">README</a>)
                  </td> 
                <td><a tal:condition="product/hasError" tal:attributes="href string:${QI/absolute_url}/${product/id}/prefs_installed_product_overview">
                        <img  src="/misc_/PageTemplates/exclamation.gif"></a>
                </td>
            </tr>
        </table>
        <input class="context"
               type="submit"
               i18n:attributes="value"
               value="Install"
               />
    </form>

    <h2 i18n:translate="heading_install_products_installed"> Installed products </h2>
    <form action="uninstallProducts" tal:attributes="action python:QI.absolute_url()" method="POST">

        <table>
            <tal:block tal:repeat="product QI/listInstalledProducts">
                <tr tal:condition="not: product/isHidden" >
                    <td><input class="noborder"
                               type="checkbox"
                               name="products:list" tal:attributes="value product/id"
                               tal:condition="not: product/isLocked"
                               /></td>
                    <td>
                         <span tal:content="product/id" >product name</span>
    
                         (<a tal:attributes="href string:${QI/absolute_url}/${product/id}/prefs_installed_product_overview"
                             i18n:translate="link_install_products_log">Install log</a>)
    
                    </td>
                </tr>
            </tal:block>
        </table>
        <input class="context"
               type="submit"
               i18n:attributes="value"
               value="Uninstall"
               name="uninstallProducts:method"
               />
        <input class="context"
               type="submit"
               i18n:attributes="value"
               value="Reinstall"
               name="reinstallProducts:method"
               tal:condition="python:QI.getProductFile('CMFQuickInstallerTool','version.txt') >= '1.4'"
               />
    </form>
</div>

</body>
</html>
