<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/prefs_main_template/macros/master"
      i18n:domain="plone">

<metal:block metal:fill-slot="top_slot"
             tal:define="dummy python:request.set('disable_border',1)" />

<body>

<div metal:fill-slot="prefs_configlet_main"
     tal:define="errors python:request.get('errors', {});
                 obj python:getattr(portal_properties, request.get('attr',''))">

    <h1 tal:define="heading_title string:heading_${request/attr}"
        i18n:translate=""
        tal:content="obj/title">title</h1>

    <a href=""
       class="link-parent"
       tal:attributes="href string: $portal_url/plone_control_panel"
       i18n:translate="label_up_to_plone_setup">
    Up to Site Setup
    </a>

    <p tal:define="heading_description string:description_${request/attr}"
       tal:content="python:here.translate(heading_description)">description</p>

    <form action=""
          name="reconfig"
          method="post"
	  tal:attributes="action string:prefs_portal_properties_set"
          tal:define="props python:portal_properties;">

        <fieldset>

            <input type="hidden" name="attr" tal:attributes="value request/attr" />

            <legend i18n:translate="legend_plone_details">Plone Details</legend>

            <div class="field"
                 tal:repeat="id python:obj.propertyIds()">

                <label i18n:translate="" tal:content="id" />
    
                <input size="40"
                       tabindex=""
                       tal:attributes="name id;
                                       value python:obj.getProperty(id);
                                       tabindex tabindex/next;"
                        tal:condition="python:obj.getPropertyType(id) in ('float','date','string','ustring','tokens','utokens', 'int')" />
    
                <input tal:attributes="type string:checkbox;
                                       name id;
                                       size:int string:35;
                                       tabindex tabindex/next;
                                       checked python:test(obj.getProperty(id))"
                       tal:condition="python:obj.getPropertyType(id)=='boolean'" />
    
                <textarea tal:attributes="name id;"
                          tal:condition="python:obj.getPropertyType(id) in ('utext','lines','ulines')"
                          tal:content="python:'\n'.join(obj.getProperty(id))"></textarea>


                <textarea tal:attributes="name id;"
                          tal:condition="python:obj.getPropertyType(id) in ('text', )"
                          tal:content="python:obj.getProperty(id)"></textarea>


            </div>

	        <div class="formControls">
                <input class="context"
                       tabindex=""
                       type="submit"
                       name="manage_editProperties:method"
                       value="Save"
                       i18n:attributes="value label_save;"
                       tal:attributes="tabindex tabindex/next;"
                       />
            </div>

        </fieldset>

    </form>

</div>

</body>
</html>

