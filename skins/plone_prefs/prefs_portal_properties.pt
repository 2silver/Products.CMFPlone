<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/prefs_main_template/macros/master"
      i18n:domain="plone">

<metal:block metal:fill-slot="top_slot"
             tal:define="dummy python:request.set('disable_border',1)" />

<body>

<div metal:fill-slot="prefs_configlet_main"
     tal:define="errors options/state/getErrors;">

    <h1 title="title"
        i18n:attributes="title"
        tal:attributes="title string:heading_${request/attr}">title</h1>

    <p title="title"
       i18n:attributes="title"
       tal:attributes="title string:description_${request/attr}">description</p>

    <form action=""
          name="reconfig"
          method="post"
	  tal:attributes="action string:prefs_portal_properties_set"
          tal:define="props python:here.portal_properties;">

        <fieldset>

            <input type="hidden" name="attr" tal:attributes="value request/attr" />

            <legend i18n:translate="legend_plone_details">Plone Details</legend>

            <tal:block define="global obj python:getattr(here.portal_properties, request.get('attr',''))" />
 
            <div class="field"
                 tal:repeat="id python:obj.propertyIds()">

                <label tal:content="id" />
    
                <input size="40"
                       tabindex=""
                       tal:attributes="name id;
                                       value python:obj.getProperty(id);
                                       tabindex tabindex/next;"
                        tal:condition="python:obj.getPropertyType(id) in ('float','date','string','ustring','tokens','utokens', 'int')" />
    
                <input tal:attributes="type string:checkbox;
                                       name id;
                                       size:int string:35;
                                       tabindex tabindex/next;
                                       checked python:test(obj.getProperty(id))"
                       tal:condition="python:obj.getPropertyType(id)=='boolean'" />
    
                <textarea tal:attributes="name id;"
                          tal:condition="python:obj.getPropertyType(id) in ('text','utext','lines','ulines')"
                ><tal:block repeat="val python:obj.getProperty(id)"><tal:block replace="val" /></tal:block></textarea>

            </div>

	        <div class="formControls">
                <input class="context"
                       tabindex=""
                       type="submit"
                       name="manage_editProperties:method"
                       value="Save"
                       i18n:attributes="value"
                       tal:attributes="tabindex tabindex/next;"
                       />
            </div>

        </fieldset>

    </form>

</div>

</body>
</html>

