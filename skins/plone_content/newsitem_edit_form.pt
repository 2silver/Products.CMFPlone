<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone"      i18n:domain="plone"
>
<body>

<div metal:fill-slot="main" 
     tal:define="errors python:request.get('errors', {});
                 Iterator python:modules['Products.CMFPlone'].IndexIterator;
                 tabindex python:Iterator();">

    <h1 i18n:translate="">Edit News item</h1>

    <p i18n:translate="">
    A news item is a small piece of news that is published on the front
    page. Add the relevant details below, and press "Save".
    </p>

    <span tal:replace="nothing">
    ##### SET THE FORM ACTION TO request/url FOR THE FORM_TOOL -- CUT AND PASTE INTO YOUR FORM ####
    </span>
    
    <form class="group"
          name="edit_form" 
          action="newsitem_edit"           
          method="post" 
          tal:attributes="action request/URL" >

        <span class="legend" i18n:translate="">News Details</span>
        
        <div class="row" 
             tal:attributes="style python:test(not getattr(here.portal_membership.getAuthenticatedMember(), 'visible_ids', ''),
                                          'visibility:hidden;;position:absolute;;left:0;;top:0', '')"
             tal:define="error_id errors/id | nothing;
	  id python:request.get('id', here.getId());"> 
            <div class="label required">
            
                <span i18n:translate="id">Short Name</span>
            
                <div id="id_help" 
                     i18:translate="id_help"
                     class="help" 
                     style="visibility:hidden">
                Enter the Short Name of the document. This is the part that will show up as part
                of the web address. This should be short, descriptive
                and preferrably not contain spaces, underscores or mixed case. Example:
                "expense-report-2002"
                </div>
            </div>
            
            <div class="field"
                  tal:attributes="class python:test(error_id, 'field error', 'field')" >

                <div tal:condition="error_id"
                     tal:replace="structure string:$error_id <br />" />

                <input type="text" 
                       name="id" 
                       value="#"
                       size="30" 
                       tabindex=""
                       onfocus="formtooltip('id_help',1)" 
                       onblur="formtooltip('id_help',0)" 
                       tal:attributes="value id;
                                       tabindex tabindex/next;" 
                       />
            </div>

        </div>
      
        <div class="row"
             tal:define="error_title errors/title|nothing;
                         Title request/title | here/Title;"> 
            <div class="label required">
                <span i18:translate="title">Title</span>
                
                <div id="title_help" 
                     i18n:translate="title_help"
                     class="help" 
                     style="visibility:hidden">
                Enter the title of the news item.
                </div>
            </div>
            
            <div class="field"
                  tal:attributes="class python:test(error_title, 'field error', 'field')" >

                <div tal:condition="error_title"
                     tal:replace="structure string:$error_title <br />" />

                <input type="text" 
                       name="title" 
                       value="#" 
                       size="30" 
                       tabindex=""
                       onfocus="formtooltip('title_help',1)" 
                       onblur="formtooltip('title_help',0)" 
                       tal:attributes="value Title;
                                       tabindex tabindex/next;" 
                       />

            </div>
        </div>

        <div class="row">
            <div class="label">
                <span i18n:translate="leadin">Lead-in</span>
                
                <div id="leadin_help" 
                     i18n:translate="leadin_help"
                     class="help" 
                     style="visibility:hidden">
                A short descriptive summary of the news. This will be what shows up on the news
                page together with the headline and a link to the full news item.
                </div>
            </div>
            <div class="field" tal:define="description request/description | here/Description "> 
                <textarea cols="40" 
                          rows="5" 
                          tabindex=""
                          name="description"
                          onfocus="formtooltip('leadin_help',1)" 
                          onblur="formtooltip('leadin_help',0)"
                          tal:content="description"
                          tal:attributes="tabindex tabindex/next;"
                          >
                Description 
                </textarea>
            </div>
        </div>

        
	    <div class="row"> 
            <div class="label"> 
                <span i18n:translate="body_text">Body text</span> 

                <div id="body_help" 
                     i18n:translate="body_help"
                     class="help" 
                     style="visibility:hidden">
                The body text of the news item. 
                </div>
            </div>
            <div class="field" tal:define="text python:request.get('text', here.text)">
                <textarea name="text:text" 
                          rows="20" 
                          cols="40" 
                          tabindex=""
                          onfocus="formtooltip('body_help',1)" 
                          onblur="formtooltip('body_help',0)" 
                          tal:content="text"
                          tal:attributes="tabindex tabindex/next;"
                          >Document text</textarea>
            </div>
        </div>

	    <div class="row">
            <div class="label">
                <span i18n:translate="format">Format</span>
                <div id="format_help"
                     i18n:translate="format_help" 
                     class="help" 
                     style="visibility:hidden">
                Select which format you want to type the contents of this
                document in. If you are unsure of which format to use, just
                select Plain Text and type the document as you usually
                do.
                </div>
            </div>
  	        <div class="field"
                 tal:define="tabindex tabindex/next;">	
                <input class="noborder" 
                       type="radio" 
                       name="text_format"
                       value="structured-text" 
                       tabindex=""
                       id="cb_structuredtext"
                       onfocus="formtooltip('format_help',1)" 
                       onblur="formtooltip('format_help',0)" 
                       tal:attributes="checked python:test(here.text_format=='structured-text', 1, 0);
                                       tabindex tabindex;" 
                       />
                <label for="cb_structuredtext" i18n:translate="structured_text">Structured Text</label> <br />
		
                <input class="noborder" 
                       type="radio" 
                       name="text_format" 
                       value="html" 
                       tabindex=""
                       id="cb_html"
                       onfocus="formtooltip('format_help',1)" 
                       onblur="formtooltip('format_help',0)" 
                       tal:attributes="checked python:test(here.text_format=='html', 1, 0);
                                       tabindex tabindex;" 
                       />	
                <label for="cb_html" i18n:translate="html">HTML</label> <br />
			
                <input class="noborder" 
                       type="radio" 
                       name="text_format"
                       value="plain" 
                       tabindex=""
                       id="cb_plain"
                       onfocus="formtooltip('format_help',1)" 
                       onblur="formtooltip('format_help',0)" 
                       tal:attributes="checked python:test(here.text_format=='plain', 1, 0);
                                       tabindex tabindex;" 
                       />
                <label for="cb_plain" i18n:translate="plain_text">Plain Text</label>
            </div>
	    </div>

        <div class="row">
            <div class="label">&nbsp;</div>
            <div class="field">
                <input class="context" 
                       tabindex=""
                       type="submit" 
                       name="submit" 
                       value="Save"
                       tal:attributes="tabindex tabindex/next;"
                       /> 
            </div>
        </div> 

        <span tal:replace="nothing">
         ##### HIDDEN VARIABLES FOR THE FORM_TOOL -- CUT AND PASTE THESE INTO YOUR FORM ####
        </span>                        
        <input type="hidden" name="form_submitted" value="1" tal:attributes="value template/id" >        

    </form>

</div>
  
</body>
</html>
