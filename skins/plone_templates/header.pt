<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<head metal:define-macro="html_header" 
      tal:define="global portal_url here/portal_url;
                  baseHREF python:test(here.isPrincipiaFolderish, here.absolute_url()+'/', here.absolute_url());
		  base_href string:${here/absolute_url}/${template/getId}">

    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

	<title tal:content="string:${here/portal_properties/title} - ${here/title_or_id}">Title of page</title>

    <base href="http://yoursite/folder/content/template_id" 
          tal:attributes="href string:$base_href" />

<!-- Commented out for now - we need a new editor 
	<metal:block tal:condition="python:test(request['HTTP_USER_AGENT'].find('MSIE')!=-1, 1, 0)">
          <?import namespace="xs" implementation="XS/htmlEditor" />
    </metal:block>
-->

	<!-- Basic crude style for Netscape4.x and other CSS1 browsers - 
         can be removed if you don't want to support those browsers
         specifically. Site will still be viewable, but look a bit 
         stripped :) --> 
	  <link rel="Stylesheet" 
	        type="text/css" 
		href="ploneBasicNS.css" 
		tal:attributes="href string:$portal_url/ploneBasicNS.css" />
		
	  <link rel="Stylesheet" 
	        type="text/css" 
		href="ploneStructureNS.css" 
		tal:attributes="href string:$portal_url/ploneStructureNS.css" />
		
	  <link rel="Stylesheet" 
	        type="text/css" 
		href="ploneWidgetsNS.css" 
		tal:attributes="href string:$portal_url/ploneWidgetsNS.css" />
		
	  <link rel="Stylesheet" 
	        type="text/css" 
		href="ploneDeprecatedNS.css" 
		tal:attributes="href string:$portal_url/ploneDeprecatedNS.css" />
		
	  <link rel="Stylesheet" 
	        type="text/css" 
		href="ploneCalendarNS.css" 
		tal:attributes="href string:$portal_url/ploneCalendarNS.css" />

	<!-- Style sheets for CSS2 capable browsers (Mozilla, Opera, IE, Netscape6+, Konqueror etc. -->
    <style tal:replace="structure here/CSSImports">
      This block will be dynamically replaced withe the @import statements for use in IE4.0 and higher.
      If you put the @imports in here (which you should do, CSSImports is a just a out-of-the-box useability artifact)
      then your designers (with Macro expansion turned on) will be able to see styled content.
    </style>
	
    <meta http-equiv="imagetoolbar" content="no" /> <!-- Disable IE6 image toolbar -->

    <!-- Some ECMAScript magic to control the sticky notes :) -->
    
    <script language="javascript"
            type="text/javascript"
            src="ieemu.js"
            tal:attributes="src string:$portal_url/ieemu.js" ></script>

    <script language="javascript" type="text/javascript">
      if (moz) {
      	extendElementModel();
        extendEventObject();
      	emulateEventHandlers(["mouseover", "mouseout"]);
      }
    </script>

    <!-- External script from Apple(!), will need to move into code and tweak.
    (No problem licence-wise, it's free and modifiable) --> 
    
    <script language="JavaScript"
            type="text/javascript" 
      src="http://developer.apple.com/internet/javascript/styley.js"
      tal:attributes="src string:$portal_url/styley.js" >
    </script>     

    <script language="JavaScript1.3" type="text/javascript">
     <!--

      function showDay(date) {
        tempX = document.body.offsetWidth - event.x;
        tempY = event.clientY + document.body.scrollTop;

        document.getElementById('day' + date).style.pixelTop = tempY - 20;
        document.getElementById('day' + date).style.pixelRight = tempX + 12;
        document.getElementById('day' + date).style.visibility = 'visible';
        return true;
      }

      function hideDay(date) {
        document.getElementById('day' + date).style.visibility = 'hidden';
        return true;
      }
      // -->
    </script>
    
</head>

<div metal:define-macro="portal_header"
     tal:define="portal_url here/portal_url" >

		<div class="top">
			
			<div class="searchBox">
                
            	<form name="searchform" 
		      action="search"
		      tal:attributes="action string:${portal_url}/search" >

          		    <input id="searchGadget" 
			           name="SearchableText" 
				   type="text" 
				   size="20" 
				   value=""
				   tal:attributes="value request/SearchableText|nothing;" />
				   
			    <input class="context" 
			           type="submit" 
				   value="Search" />
            	</form>
			</div>

            <a href="#" tal:attributes="href portal_url" >
            	<img src="img/logo.png" class="logo" alt="Zope CMF" border="0" tal:attributes="src string:$portal_url/logo.png" />
            </a>
		

		</div>
	
		<!-- A tiny script to focus on the search gadget automatically 
		<script language="JavaScript" type="text/javascript">
			document.searchform.searchGadget.focus();
		</script>
	    -->
			
	<hr size="" class="netscape4" />
     
<!-- NOTE:
     The below inlined personalBar/pathBar and portal_tabs will all be converted to using the portal_actions tool before
     Plone1.0 is released.  We are trying to get rid of unneccessary files off the filesystem.  After we get the files
     off the filesystem we will move to implementing the functionality.  This can also cause serious incompatibilties
     for those using CMF1.2.  Sorry, backwards compatability is too crufty.  We can also speed plone up by not having to
     worry about previous versions to CMF1.3.  ~runyaga 5/7/02
-->
	<div class="tabs"  metal:use-macro="here/portal_tabs/macros/portal_tabs" >
          Portal Tabs are here       
        </div>

	<div class="personalBar"
	     metal:define-macro="personalBar"
	     tal:define="portal_url here/portal_url;
			 actions python:request.get('filtered_actions', here.portal_actions.listFilteredActionsFor(here)); 
			 my_stuff python:[ua for ua in actions['user'] if ua.get('id','')=='mystuff'];	
			 undo python:[ga for ga in actions['global'] if ga.get('id', '')=='undo'];
			 my_prefs python:[ua for ua in actions['user'] if ua.get('id', '')=='preferences'];
			 portal_prefs python:[ga for ga in actions['global'] if ga.get('id', '')=='configportal'];
			 logout python:test(here.portal_membership.isAnonymousUser(), None, portal_url+'/logout');">

	    &nbsp;
	    <a href=""
	       tal:condition="my_stuff"
	       tal:attributes="href python:my_stuff[0]['url']">
		 <img src="dummy.gif" alt="User" 
		      border="0" 
		      tal:attributes="src string:$portal_url/user.gif" /> &nbsp;
		      <span tal:replace="user/getUserName">john</span>
	    </a>

	    <a href=""
	       tal:condition="my_stuff" 
	       tal:attributes="href python:my_stuff[0]['url']">
		 <img src="dummy.gif" alt="&gt;" 
		      border="0"  tal:attributes="src string:$portal_url/linkOpaque.gif"/>
		      My&nbsp;Stuff 
	    </a>

	    <a href="workspace"
	       tal:condition="my_stuff"
	       tal:attributes="href string:${here/portal_membership/getHomeUrl}/workspace">
		 <img src="dummy.gif" alt="&gt;" 
		      border="0"  tal:attributes="src string:$portal_url/linkOpaque.gif"/>
		      My&nbsp;Workspace 
	    </a>
	    
	    
	    <a href=""
	       tal:condition="undo" 
	       tal:attributes="href python:undo[0]['url']">
		 <img src="dummy.gif" alt="&gt;" border="0"  
		      tal:attributes="src string:$portal_url/linkOpaque.gif" />Undo&nbsp;History
	    </a>

	    <a href=""
	       tal:condition="my_prefs" 
	       tal:attributes="href python:my_prefs[0]['url']">
		 <img src="linkOpaque.gif" alt="&gt;" border="0"  
		      tal:attributes="src string:$portal_url/linkOpaque.gif" />My&nbsp;Preferences
	    </a>

	    <a href=""
	       tal:condition="portal_prefs"
	       tal:attributes="href python:portal_prefs[0]['url']"> 
		 <img src="dummy.gif" alt="&gt;" border="0"  
		      tal:attributes="src string:$portal_url/linkOpaque.gif"/>CMF&nbsp;Setup
	    </a>

	    <a href=""
	       tal:condition="logout" 
	       tal:attributes="href logout">
		 <img src="dummy.gif" alt="&gt;" border="0"  
		      tal:attributes="src string:$portal_url/linkOpaque.gif"/>Sign Out</a> 

	</div>

	<div class="pathBar"
	     metal:define-macro="pathBar"
	     tal:define="breadcrumbs python:here.breadcrumbs(here);
			 portal_url here/portal_url;"
	     tal:condition="breadcrumbs">

		<a href="#"
		   tal:condition="not: here/portal_membership/isAnonymousUser"
		   tal:attributes="href string:${here/absolute_url}/addtoFavorites">
		     <img class="addFavorite" 
              src="dummy.gif" 
			  alt="Add this location to My Favorites"
              title="Add this location to My Favorites" 
			  border="0"
			  tal:attributes="src string:$portal_url/addFavorite.gif" />
		</a>

		You are here: 

		<span tal:repeat="crumb breadcrumbs">
		  <span tal:define="global is_last repeat/crumb/end"
			tal:replace="nothing" />

		  <a href="#" tal:attributes="href python:crumb[1]"
		     tal:content="python:crumb[0]" tal:condition="not: is_last">crumb</a>

		  <strong tal:condition="python:not is_last"> &raquo; </strong>

		  <strong tal:condition="python:is_last"
			  tal:content="python:crumb[0]" > crumb </strong>

		</span>   

	</div>
	     
	<hr size="" class="netscape4" />

</div>




<div metal:define-macro="portal_message" class="message"
     tal:define="portal_message request/portal_status_message | nothing"
     tal:condition="portal_message"> 
    <img src="img/info.gif" alt="Portal information" tal:attributes="src string:$portal_url/plone_images/info.gif">
    <strong tal:content="portal_message">Object changed.</strong> 
</div>


