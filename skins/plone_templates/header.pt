<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<head metal:define-macro="html_header" 
      tal:define="global portal_url here/portal_url">

    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

    <title tal:content="string:${here/portal_properties/title} - ${here/title_or_id}">Title of page</title>

    <base href="http://yoursite/folder/content/template_id" 
          tal:attributes="href string:${here/absolute_url}/${template/getId}" />

    <!-- Basic crude style for Netscape4.x - can be removed if you don't want to support  
         it. Site will still be viewable, but look a bit stripped :) --> 
    <link rel="Stylesheet" type="text/css" href="dummy" 
          tal:attributes="href string:$portal_url/ploneBasicNS.css" />
    <link rel="Stylesheet" type="text/css" href="dummy" 
          tal:attributes="href string:$portal_url/ploneStructureNS.css" />
    <link rel="Stylesheet" type="text/css" href="dummy"
          tal:attributes="href string:$portal_url/ploneWidgetsNS.css" />
    <link rel="Stylesheet" type="text/css" href="dummy"
          tal:attributes="href string:$portal_url/ploneCalendarNS.css" />

    <!-- Style sheets for CSS2 capable browsers (Mozilla, Opera, IE, Netscape6+, Konqueror etc. -->
    <style tal:replace="structure here/CSSImports">
      This block will be dynamically replaced withe the @import statements for use in IE4.0 and higher.
      If you put the @imports in here (which you should do, CSSImports is a just a out-of-the-box 
      usability artifact)then your designers (with Macro expansion turned on) will be able to see 
      styled content.
    </style>

    <!-- Style sheet used for printing -->
    <link rel="stylesheet" type="text/css" media="print" href="dummy" 
          tal:attributes="href string:$portal_url/plonePrint.css"/>

    <!-- Style sheet used for presentations (OperaShow, mainly) -->
    <link rel="stylesheet" type="text/css" media="projection" href="dummy" tal:attributes="href string:$portal_url/plonePresentation.css"/>

    <meta http-equiv="imagetoolbar" content="no" /> <!-- Disable IE6 image toolbar -->

    <!-- Consolidation of all javascript into 1 call -->

    <metal:block metal:define-slot="head_slot" tal:replace="nothing">
    Flexibility for published templates to inject stuff into HEADER
    For instance, folder_listing, folder_contents needs to inject javascript into the header
    </metal:block>
    
    <tal:block tal:replace="structure string:&lt;script language='javascript'&gt;" />
      <metal:block metal:define-slot="javascript_head_slot" tal:replace="nothing">
      </metal:block>
      <metal:block tal:replace="structure here/plone_javascripts.js" /> 
    <tal:block tal:replace="structure python:'&lt;/script&gt;'" />
</head>

<div metal:define-macro="portal_header"
     tal:define="portal_url here/portal_url" >

        <div class="top">

            <div class="searchBox">

                <form name="searchform" 
                      action="search"
                      tal:attributes="action string:${portal_url}/search" >

                    <input id="searchGadget" 
                           name="SearchableText" 
                           type="text" 
                           size="20" 
                           value=""
                           tal:attributes="value request/SearchableText|nothing;" />

                    <input class="context" 
                           type="submit" 
                           value="Search" />
                </form>
            </div>

            <a href="#" tal:attributes="href portal_url" >
                <img src="img/logo.png" class="logo" alt="Plone" border="0" tal:attributes="src string:$portal_url/logo.png" />
            </a>


        </div>

        <hr size="" class="netscape4" />
     
<!-- NOTE:
     The below inlined personalBar/pathBar and portal_tabs will all be converted to using the portal_actions tool before
     Plone1.0 is released.  We are trying to get rid of unneccessary files off the filesystem.  After we get the files
     off the filesystem we will move to implementing the functionality.  This can also cause serious incompatibilties
     for those using CMF1.2.  Sorry, backwards compatability is too crufty.  We can also speed plone up by not having to
     worry about previous versions to CMF1.3.  ~runyaga 5/7/02

-->
        <div class="tabs"
             metal:define-macro="portal_tabs"
             tal:define="global actions here/portal_actions/listFilteredActionsFor;
                         global_tabs actions/global_tabs|nothing;">
        <metal:block tal:repeat="tab global_tabs"
                     tal:define="contentpath python:here.portal_url.getRelativeContentPath(here);
                                     global compare_id python:template.getId();" >

            <metal:block tal:condition="contentpath">
                 <metal:block tal:define="global compare_id python:contentpath[-1]" />
            </metal:block>

            <a href="" class=""
               tal:attributes="href tab/url;
                               class python:test(compare_id==tab['id'], 'selected', 'plain')">
                <span tal:replace="tab/name">welcome</span>
            </a>
            
            <span class="netscape4">&middot;</span>
        </metal:block>
        </div>

        <div class="personalBar"
             metal:define-macro="personalBar"
             tal:define="portal_url here/portal_url;
                         actions python:request.get('filtered_actions', here.portal_actions.listFilteredActionsFor(here)); 
                         user_actions actions/user;
                         global_actions actions/global;
                         my_stuff python:user_actions[0];
                         display_actions python:user_actions[:-1]+global_actions+list((user_actions[-1],))">&nbsp;

            <a href=""
               tal:condition="not: here/portal_membership/isAnonymousUser"
               tal:attributes="href my_stuff/url">
                <img src="dummy.gif" 
                     alt="User" 
                     border="0" 
                     tal:attributes="src string:$portal_url/user.gif" /> &nbsp;
            
                <span tal:replace="user/getUserName">john</span>
            </a>

            <span tal:condition="here/portal_membership/isAnonymousUser">you are not logged in</span>

            <metal:block tal:repeat="action python:display_actions">
            <a href=""
               tal:attributes="href action/url">
                <img src="dummy.gif" 
                     alt="&gt;"
                     border="0"
                     tal:attributes="src string:$portal_url/linkOpaque.gif" />
                
                <span tal:replace="action/name">My&nbsp;Stuff</span>
            </a>
            </metal:block>
        </div>

        <div class="pathBar"
             metal:define-macro="pathBar"
             tal:define="breadcrumbs python:here.breadcrumbs(here);
                         portal_url here/portal_url;"
             tal:condition="breadcrumbs">

            <a href="#"
               tal:condition="not: here/portal_membership/isAnonymousUser"
               tal:attributes="href string:${here/absolute_url}/addtoFavorites">

                <img class="addFavorite" 
                     src="dummy.gif" 
                     alt="Add this location to My Favorites"
                     title="Add this location to My Favorites" 
                     border="0"
                     tal:attributes="src string:$portal_url/addFavorite.gif" />
            </a>

            You are here: 

            <span tal:repeat="crumb breadcrumbs">

                <span tal:define="global is_last repeat/crumb/end"
                      tal:replace="nothing" />

                <a href="#" 
                   tal:attributes="href python:crumb[1]"
                   tal:content="python:crumb[0]" 
                   tal:condition="not: is_last">crumb</a>

                <strong tal:condition="python:not is_last"> &raquo; </strong>

                <strong tal:condition="python:is_last"
                        tal:content="python:crumb[0]" > crumb </strong>

            </span>

        </div>

        <hr size="" class="netscape4" />

    </div>

    <div class="message"
         metal:define-macro="portal_message" 
         tal:define="portal_message request/portal_status_message | nothing"
         tal:condition="portal_message"> 

        <img src="info.gif" alt="Portal information" tal:attributes="src string:$portal_url/info.gif" />

        <strong tal:content="portal_message">Object changed.</strong> 
    </div>

