<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" 
      xml:lang="en"
      lang="en" 
      metal:define-macro="master"
      tal:define="global member here/portal_membership/getAuthenticatedMember;
        global portal here/portal_url/getPortalObject;
        global actions python:here.portal_actions.listFilteredActionsFor(here);
        global site_properties here/portal_properties/site_properties;
        global ztu modules/ZTUtils
        global actions options/actions|actions|nothing;
        global obj_actions actions/object;
        global wf_actions actions/workflow;
        global folder_actions actions/folder;
        global local_actions python:actions.get('object_tabs', []);
        global isFolder python:test(here.getTypeInfo().getId() in site_properties.use_folder_tabs,1,0);
        global template_id options/template_id|template_id|template/getId|nothing;" 
      tal:attributes="lang site_properties/default_language|default;
                      xml:lang site_properties/default_language|default;"
      >

<head metal:use-macro="here/header/macros/html_header">
  <metal:block metal:fill-slot="base">
    <metal:block metal:define-slot="base">
        <base href="" tal:attributes="href string:${here/absolute_url}/" />
    </metal:block>
  </metal:block>
  
  <metal:block metal:fill-slot="head_slot"
               tal:define="lang python:test(here.Language(), here.Language(), site_properties.default_language);
                           charset site_properties/default_charset|string:utf-8">
    <metal:block tal:define="dummy python:request.RESPONSE.setHeader('Content-Type', 'text/html;;charset=%s' % charset)" />
    <metal:block tal:define="dummy python:request.RESPONSE.setHeader('Content-Language', lang)" />
    <metal:block tal:define="dummy python:request.RESPONSE.setHeader('Expires', 'Sat, 1 Jan 2000 00:00:00 GMT')" />
    <metal:block tal:define="dummy python:request.RESPONSE.setHeader('Pragma', 'no-cache')" />
    <metal:block tal:define="dummy python:request.RESPONSE.setHeader('Last-Modified', DateTime().toZone('GMT').rfc822())" />
    <metal:block metal:define-slot="head_slot" />
  </metal:block>
  
  <metal:block fill-slot="css_slot">
    <metal:block define-slot="css_slot" />
  </metal:block>

  <metal:block metal:fill-slot="javascript_head_slot">
    <metal:block metal:define-slot="javascript_head_slot" />
  </metal:block>
</head>

<body>

<div metal:use-macro="here/header/macros/portal_header">
Header stuff
</div>


<table class="columns"
       tal:define="slots_mapping options/slots_mapping|here/prepare_slots|nothing;">

    <tbody>
        <tr>
            <td class="left" metal:define-macro="left_column"
	                     tal:condition="slots_mapping/left|nothing">
                <metal:block tal:repeat="slot slots_mapping/left|slots_mapping/left">
                <tal:block tal:define="global pathexpr python:slot[0];
                                       global usemacro python:slot[1]"
                           tal:condition="usemacro">
                    <metal:block metal:use-macro="python:path(pathexpr)" />
                </tal:block>
                <span tal:condition="not: usemacro"
                      tal:replace="structure python:path(pathexpr)" />
                </metal:block>
            </td>
            <td class="main" 
                tal:define="global show_border python:here.showEditableBorder( template_id=template.getId()
                                                                             , actions=actions )">

                <metal:block metal:define-slot="super"
		             tal:condition="show_border" >
                
                <div id="contentTabs" metal:define-macro="contentTabs"
                     i18n:domain="plone">
   
                    <tal:block tal:repeat="action python:test(isFolder, folder_actions+local_actions, obj_actions+local_actions)">
                        <a class="" href="" 
                           tal:attributes="class python:test(action['url'][action['url'].rfind('/')+1:]==template_id, 'selected', 'plain');
			                   href action/url;">
                            <span tal:omit-tag="" i18n:translate=""><span tal:replace="action/name">dummy</span></span>
                        </a> 
                    </tal:block>
    
                </div>

                <div id="contentBar">        
                &nbsp;
                </div>    
            
                </metal:block>
            
                <div class="document"
                     tal:attributes="class python:test(show_border, 'editableDocument', 'document')">

                    <div id="content">

                        <metal:block metal:use-macro="here/header/macros/portal_message">
                        Message box
                        </metal:block>
            
                        <div class="documentActions"
                             metal:define-macro="documentActions">
    
                            <metal:block metal:define-slot="documentActions" tal:content="nothing">
                            Document actions slot
                            </metal:block>                     
    
                            <a href=""
                               tal:condition="site_properties/allow_sendto | nothing"
                               tal:attributes="href python:'%s/portal_form/sendto_form' % here.absolute_url()">
                                <img i18n:attributes="title" tal:attributes="src string:$portal_url/mail_icon.gif" src="mail_icon.gif" alt="Send to" title="Send this page to somebody" />
                            </a>
    
                            <a href="javascript:this.print();">
                                <img i18n:attributes="title" tal:attributes="src string:$portal_url/print_icon.gif" src="print_icon.gif" alt="Print" title="Print this page" />
                            </a>
                        </div>
    
                        <metal:block metal:define-slot="header" tal:content="nothing">
                        Header slot 
                        </metal:block>
    
                        <metal:block metal:define-slot="main" tal:content="nothing">
                        Page body text 
                        </metal:block>
            
                        <metal:block metal:define-slot="sub">
                        <tal metal:use-macro="here/viewThreadsAtBottom/macros/discussionView" />
                        </metal:block> 
                    </div>
                </div>
            </td>

            <td class="right" tal:condition="slots_mapping/right">
                <metal:block tal:repeat="slot slots_mapping/right">
                    <tal:block tal:define="global pathexpr python:slot[0];
                                           global usemacro python:slot[1];"
                               tal:condition="usemacro">
                        <metal:block metal:use-macro="python:path(pathexpr)" />
                    </tal:block>
                    <span tal:condition="not: usemacro"
                          tal:replace="structure python:path(pathexpr)" />
                </metal:block>
            </td>
        </tr>
    </tbody>
</table>

<hr size="" class="netscape4" />

<div class="footer" metal:use-macro="here/footer/macros/portal_footer">
Footer
</div>


</body>
</html>
