<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- The top tabs of the portal, displayed in the header -->
          
<div class="tabs" 
     metal:define-macro="portal_tabs"
     tal:define="portal_url here/portal_url;
                 news python:request.get('news',  here.portal_catalog.searchResults( meta_type='News Item'
                                                                                   , sort_on='Date'
                                                                                   , sort_order='reverse'
                                                                                   , review_state='published'));
		 dummy python:test(request.get('news', 0), request.set('news', news), 0);">
     
        <a href=""
           tal:attributes="href portal_url;
           class python:test(request.URL0==portal_url+'/index_html', 'selected', 'plain')">
         Welcome</a> <span class="netscape4">&middot;</span>
           
    	<a href="roster" tal:condition="python:here.portal_membership.checkPermission('List portal members', here)"
           tal:attributes="href string:$portal_url/Members/roster;
                           class python:test('Members' in here.getPhysicalPath(), 'selected', 'plain')">
         Members</a> <span class="netscape4">&middot;</span>
    	
        <a href="#"
           tal:attributes="href string:$portal_url/recent_news;
	   class python:test(template.getId()=='recent_news', 'selected', 'plain')"
           tal:condition="request/news" >
         News</a> <span class="netscape4">&middot;</span>
						   
	    <a href="search_form"
           tal:attributes="href string:$portal_url/search_form;
                   class python:test(template.getId()=='search_form', 'selected', 'plain')">
         Search</a> <span class="netscape4">&middot;</span>

</div>


<!-- The tabs displayed on editable content -->

<div class="contentTabs" metal:define-macro="contentTabs"
     tal:define="actions python:here.portal_actions.listFilteredActionsFor(here);">
    
    <span tal:define="global obj_actions actions/object; 
                      global wf_actions actions/workflow;
                      global historyForm python:here.getActionUrlById('history', actions['object']);" />
  
    <span tal:repeat="action obj_actions">
        <a tal:attributes="class python:test(action['url'][action['url'].rfind('/')+1:]==template.getId(), 'selected', 'plain');href action/url;"
           class="" href="" > <span tal:replace="action/name" /> </a> <span class="netscape4">&middot;</span> 
    </span>

    
    <a class="" 
       href="content_status_history"  
       tal:condition="python:test( (not here.portal_membership.isAnonymousUser and here.getActionUrlById('status history', wf_actions ) or wf_actions ) , 1, 0)"
       tal:attributes="href string:${here/absolute_url}/content_status_history;
                       class python:test(request.URL0.find('content_status')!=-1, 'selected', 'plain');">
       Publishing</a> <span class="netscape4">&middot;</span>
      
</div>

<!-- The tabs displayed in folder_contents -->

<div class="contentTabs" 
     metal:define-macro="folderTabs"
     tal:define="actions python:here.portal_actions.listFilteredActionsFor(here);"
     >

     <span tal:define="global folderActions actions/folder" />
    
     <span tal:repeat="action folderActions">
         <a tal:attributes="class python:test(request.URL0==action['url'], 'selected', 'plain');href action/url;"
            class="" href="" > <span tal:replace="action/name" /> </a> <span class="netscape4">&middot;</span> 
     </span>

</div>
