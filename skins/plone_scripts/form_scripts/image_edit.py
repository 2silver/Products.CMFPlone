## Script (Python) "image_edit"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=precondition='', file='', id='', title=None, description=None
##title=Edit an image
##
filename=getattr(file,'filename', '')
if file and filename and context.isIDAutoGenerated(id):
    id=filename[max( string.rfind(filename, '/')
                   , string.rfind(filename, '\\')
                   , string.rfind(filename, ':') )+1:]
if file and filename:
    file.seek(0)

new_context = context.portal_factory.doCreate(context, id)
new_context.edit( precondition=precondition
                , file=file )
new_context.plone_utils.contentEdit( context
                                   , id=id
                                   , description=description )
return ('success', new_context)
