<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>

<!-- wysiwyg default widget -->
<div metal:define-macro="wysiwygEditorBox">

 <comment tal:condition="nothing"
           tal:replace="nothing" >

            This template relies on the presence of an 'inputname' variable,
            which contains the name of the element whose value should be
            altered when the calendar returns a result.
            Similarly it requires a 'formname' variable - the name
            of the form in which this input element resides.
            Also it should be provided with inputvalue which is the
            current or default value for the field.
            onfocus and/or onblur are setup as attributes if availabe.
            tabindex is setup is provided.

  </comment>

  <textarea cols="80"
            rows="15"
            tabindex="3"
            name="description"
            tal:content="inputvalue"
            tal:attributes="name inputname;
                            id inputname;
                            onfocus onfocus|nothing;
                            onblur onblur|nothing;
                            tabindex tabindex|nothing;"></textarea>

       <br />
       <a href="" 
          tal:define="pps python:modules['Products.PythonScripts.standard'];
                      editor python:here.portal_membership.getAuthenticatedMember().wysiwyg_editor;
                      wysiwyg python:test(editor and (editor!='None'), editor, 'None');
                      contentpath python:pps.url_quote(here.portal_url.getRelativeUrl(here));
                      url2editor string:${here/portal_url}/$wysiwyg/wysiwyg_popup?inputname=$inputname&amp;formname=$formname&amp;contentpath=$contentpath&amp;method=CookedBody;"
          tal:condition="python:test(wysiwyg!='None', 1, 0)"
          tal:attributes="onclick string:window.open('$url2editor','editor','dependent=yes,width=520,height=500,screenX=200,screenY=300,titlebar=yes');; return false">
       <img tal:replace="structure here/edit.gif" />
       </a>

</div>

<div metal:define-macro="wysiwygEditorBoxPopup"
     class="container"
     tal:define="DateTime python:modules['DateTime'].DateTime;">     

<script language="javascript" type="text/javascript">
function fnInit() {
    editor=document.getElementById('xsEditor');
    editor.insertHTML('this is a test');
}
</script>

<xs:XsDhtmlEditor id="xsEditor"
                  content=""
                  fontList="Times New Roman,Arial,Georgia" 
                  fontSizeDefault="small" 
                  onSave="returndate(xsEditor.content);" 
                  replaceTags="<strong>,<b>"
                  tal:define="pps python:modules['Products.PythonScripts.standard'];
                              global contentpath request/contentpath;
                              global content python:here.portal_url.getPortalObject().restrictedTraverse(contentpath);
                              global content_path string:here/$contentpath/${request/method};
                              renderedContent python:path(content_path);"
                  tal:attributes="content renderedContent" />
     
</div> 

<html>
