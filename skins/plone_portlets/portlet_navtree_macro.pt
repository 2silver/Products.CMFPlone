<tal:navitem repeat="item options/children">
<li class="navTreeItem"
    tal:condition="not: item/no_display">
    
    <tal:level define="level               options/level|python:0;
                       item_type_class     python: 'contenttype-' + here.plone_utils.normalizeString(item['portal_type']);
                       item_wf_state_class python: 'state-' + here.plone_utils.normalizeString(item['review_state']);
                       parent_shows_children options/show_children|nothing;
                       children item/children|nothing;">

    <div tal:attributes="class item_type_class">
        <a tal:condition="item/currentItem"
           tal:attributes="href item/absolute_url;
                           title item/Description|nothing;
                           class string: $item_wf_state_class navTreeCurrentItem visualIconPadding $item_type_class;"
            tal:content="item/Title|nothing">
            Selected Item Title</a>
        <tal:children condition="python: parent_shows_children or children">
        <a tal:condition="not: item/currentItem"
           tal:attributes="href item/absolute_url;
                           title item/Description|nothing;
                           class string: $item_wf_state_class visualIconPadding;"
            tal:content="item/Title|nothing">
            Unselected Item Title</a>
        </tal:children>
    </div>
        
    <ul tal:attributes="class python:'navTree navTreeLevel'+str(level)"
        tal:define="show_children item/show_children|nothing;"
        tal:condition="children"
        tal:content="structure python:here.portlet_navtree_macro(children=children, level=level+1, show_children=show_children)">
          Get subtree, if available.
    </ul>
    </tal:level>
</li>
</tal:navitem>