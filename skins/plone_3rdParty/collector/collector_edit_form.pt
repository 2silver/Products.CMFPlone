<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<span tal:condition="nothing"
      tal:define="has_edit_priv nocall: here/edit">
  This span ensures that the visitor has edit privilege, by fetching - but not
  displaying - the protected collector.edit method.
</span>

<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/main_template/macros/master">

<span tal:condition="nothing">
  Template description: Form for configuring the collector.
</span>

<body>

<div metal:fill-slot="header">

<h1>Collector Configuration</h1>

</div>

<div metal:fill-slot="main">	  

<form class="group"
      action="collector_edit" 
      method="post">

    <div class="row">
        <div class="label"> Title </div> 
        <div class="field">
            <input type="text"
                   name="title"
                   value=""
                   tal:attributes="value here/title"
                   size="45" />
        </div>
    </div>

    <div class="row">
        <div class="label"> Abbreviation </div> 
        <div class="field">
            <input type="text"
                   name="abbrev"
                   value=""
                   tal:attributes="value here/abbrev|nothing"
                   size="5" /> 
            (Collector email subject-line prefix)
        </div>
    </div>
  
    <div class="row">
        <div class="label"> Description </div> 
        <div class="field">
            <textarea name="description:text" rows="3"
                      cols="50"
                      tal:content="here/description">
            </textarea>
            (Will be rendered as HTML)
        </div>
    </div>
      
    <div class="row">
        <div class="label"> Collector email </div> 
        <div class="field"
             tal:define="member python: here.portal_membership.getAuthenticatedMember();
                         getpropemail python: hasattr(member, 'getProperty')
                                              and member.getProperty('email', '');
                         attremail python: getattr(member, 'email', '');
                         email python: getattr(here, 'email', 
                                                getpropemail or attremail)">
            
            <input type="text" 
                   name="email" 
                   size=25
                   value="EMAIL"
                   tal:attributes="value email" />
            (Collector email "From" address)
                            
        </div>
    </div>
  

  

Managers
   <textarea name="managers:lines" rows="5" cols="15">
<span tal:repeat="it here/managers" tal:replace="it"></span>
</textarea>

            Managers configure the collector, and receive request notices.
            Managers can accept issues, but must be on Supporters roster to be
            assigned.  (Managers cannot remove <em>themselves</em> from the
            management roster.)

Supporters
   <textarea name="supporters:lines" rows="5" cols="15">
<span tal:repeat="it here/supporters" tal:replace="it"></span>
</textarea>

            Supporters can be assigned to requests.  They may or may not
            receive initial request notifications, depending on the
            "dispatching" setting below.

Dispatcher Mode
                <input type="radio" name="dispatching:int" value="0"
                       tal:attributes="checked not: here/dispatching|nothing">
                  Off
                  (Managers and supporters receive pending-issue notices)

                <input type="radio" name="dispatching:int" value="1"
                       tal:attributes="checked here/dispatching|nothing">
                  On
                  (Only managers receive pending-issue notices)



Participation Mode
                <input type="radio" name="participation:string" value="staff"
                       tal:attributes="checked python: here.participation
                                                       == 'staff'">
                  Staff

                  (Only collector staff and issue requester participate in an
                  issue)

                <input type="radio" name="participation:string"
                       value="authenticated"
                       tal:attributes="checked python: here.participation
                                                       == 'authenticated'">
                  Authenticated

                  (Any non-anonymous visitors can participate)

                <input type="radio" name="participation:string" value="anyone"
                       tal:attributes="checked python: here.participation
                                                       == 'anyone'">
                  Anyone

                  (Anyone, including anonymous visitors, can chime in)



<div class="group">

<span class="legend">Notifications</span>

       Fill in addresses next to the state names to have notifications for
       issues in that state sent to those addresses (this is in addition to
       normal issue-participant notifications):

<table>
 <tbody tal:define="states here/issue_states;
                    stateslen python: len(states)"
        tal:repeat="itemnum python: range((stateslen+1)/2)">
   <tr tal:define="index repeat/itemnum/index;
                   evennum python: index * 2;
                   oddnum python: evennum+1"
       tal:condition="python: evennum < stateslen">
     <td align="right">
        <em> <span tal:replace="python: states[evennum]">State:</span> </em>
     </td>
     <td>
        <input type="text" size="30" name="stateemail" value=""
               tal:attributes="name python: 'state_email.' + states[evennum]
                                            + ':record';
                               value python:
                                   here.state_email.get(states[evennum], '')">
     </td>
     <td align="right"
         tal:condition="python: oddnum < stateslen">
        <em> <span tal:replace="python: states[oddnum]">State:</span> </em>
     </td>
     <td tal:condition="python: oddnum < stateslen">
        <input type="text" size="30" name="stateemail"
               tal:attributes="name python: 'state_email.' + states[oddnum]
                                            + ':record';
                               value python:
                                   here.state_email.get(states[oddnum], '')">
     </td>
   </tr>
 </tbody>
</table>
 
</div>

<div class="group">

<span class="legend">Selections</span>

       Fill in the alternatives for issue categorization:
<table>
 <tr valign="top">
  <td align="right"> <em> Topics </em>
  </td>
  <td>
   <textarea name="topics:lines" rows="5" cols="15">
<span tal:repeat="it here/topics|nothing" tal:replace="it"></span></textarea>
  </td>
  <td align="right"> <em> Classifications </em>
  </td>
  <td>
   <textarea name="classifications:lines" rows="5" cols="15">
<span tal:repeat="it here/classifications|nothing" tal:replace="it">
</span></textarea>
  </td>
 </tr>
  
 <tr valign="top">
  <td align="right"> <em> Importance </em>
  </td>
  <td>
   <textarea name="importances:lines" rows="5" cols="15">
<span tal:repeat="it here/importances|nothing" tal:replace="it">
</span></textarea>
  </td>
 </tr>
</table>


  
Version Info Spiel
            Something to prompt requesters for useful version info...

   <textarea name="version_info_spiel:text" rows="3" cols="50">
<span tal:replace="here/version_info_spiel|nothing">
</span></textarea>

Reinstate catalog
      Occasionally, product updates require internal catalog reinit and
      reindex and other existing-issue adjustment.  Collector product
      RELEASE_NOTES.txt will indicate when necessary.

    <input type="radio" name="recatalog:int" value="0" CHECKED>No
    <input type="radio" name="recatalog:int" value="1">Internal only
    <input type="radio" name="recatalog:int" value="2">Internal &amp; Site-wide
    (<em>slow</em>)

   <input class="context" type="submit" value="Submit">
   <input class="standalone" type="reset" value="Reset">

</form>
</div>
</body>
</html>
